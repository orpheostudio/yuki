<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#212121">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Aion">
<link rel="manifest" href="manifest.json">
<title>Aion</title>

<!-- Microsoft Clarity -->

<script>
(function(c,l,a,r,i,t,y){
  c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
  t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
  y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window,document,"clarity","script","tlya8thx8r");
</script>

<!-- AdSense -->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_ADSENSE_ID" crossorigin="anonymous"></script>

<!-- Fonts -->

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=S√∂hne:wght@400;500;600&display=swap" rel="stylesheet">

<style>
/* ‚îÄ‚îÄ‚îÄ RESET & BASE ‚îÄ‚îÄ‚îÄ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --sidebar-bg:#171717;
  --sidebar-w:260px;
  --main-bg:#212121;
  --surface:#2f2f2f;
  --surface-hover:#3a3a3a;
  --border:#3a3a3a;
  --border-light:rgba(255,255,255,.08);
  --text:#ececec;
  --text-2:#b4b4b4;
  --text-3:#8e8e8e;
  --accent:#19c37d; /* Aion brand green-teal */
  --accent-hover:#1aad6d;
  --input-bg:#2f2f2f;
  --radius:12px;
  --radius-sm:8px;
  --radius-lg:18px;
  --font:-apple-system,'S√∂hne',system-ui,sans-serif;
  --trans:.18s ease;
}
html,body{height:100%;overflow:hidden}
body{
  font-family:var(--font);
  background:var(--main-bg);
  color:var(--text);
  font-size:15px;
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
}
button{font-family:var(--font);cursor:pointer;border:none;background:none}
input,textarea{font-family:var(--font);color:var(--text);background:none;border:none;outline:none}
a{color:inherit;text-decoration:none}
svg{display:block;flex-shrink:0}

/* ‚îÄ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ‚îÄ */
::-webkit-scrollbar{width:5px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--surface-hover);border-radius:99px}

/* ‚îÄ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ‚îÄ */
#app{display:flex;height:100vh;width:100vw;overflow:hidden}

/* ‚îÄ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ‚îÄ */
#sidebar{
  width:var(--sidebar-w);
  background:var(--sidebar-bg);
  display:flex;
  flex-direction:column;
  flex-shrink:0;
  transition:transform var(--trans),width var(--trans);
  z-index:200;
  overflow:hidden;
}
#sidebar.collapsed{width:0}

.sidebar-top{
  padding:12px 10px 8px;
  display:flex;
  flex-direction:column;
  gap:4px;
}
.sidebar-brand{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 10px;
  border-radius:var(--radius-sm);
  cursor:pointer;
}
.brand-logo{
  width:32px;height:32px;
  background:linear-gradient(135deg,#19c37d,#1a8cff);
  border-radius:8px;
  display:flex;align-items:center;justify-content:center;
  flex-shrink:0;
}
.brand-name{font-size:16px;font-weight:600;color:var(--text);white-space:nowrap}
.brand-byline{font-size:10px;color:var(--text-3);white-space:nowrap}

.sidebar-btn{
  display:flex;align-items:center;gap:10px;
  padding:9px 10px;
  border-radius:var(--radius-sm);
  font-size:14px;color:var(--text-2);
  transition:background var(--trans),color var(--trans);
  white-space:nowrap;overflow:hidden;
  width:100%;text-align:left;
}
.sidebar-btn:hover,.sidebar-btn.active{background:var(--surface);color:var(--text)}
.sidebar-btn svg{flex-shrink:0}
.sidebar-btn span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

.sidebar-section-label{
  padding:12px 12px 4px;
  font-size:11px;font-weight:600;
  color:var(--text-3);letter-spacing:.04em;text-transform:uppercase;
  white-space:nowrap;
}
.history-list{
  flex:1;overflow-y:auto;padding:4px 10px;
  display:flex;flex-direction:column;gap:2px;
}
.history-item{
  display:flex;align-items:center;gap:8px;
  padding:8px 10px;
  border-radius:var(--radius-sm);
  font-size:13.5px;color:var(--text-2);
  cursor:pointer;transition:background var(--trans),color var(--trans);
  position:relative;
}
.history-item:hover{background:var(--surface);color:var(--text)}
.history-item.active{background:var(--surface);color:var(--text)}
.history-item-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}
.history-item-del{
  opacity:0;transition:opacity .12s;
  color:var(--text-3);padding:2px;border-radius:4px;
}
.history-item:hover .history-item-del{opacity:1}
.history-item-del:hover{color:var(--text);background:var(--surface-hover)}

.sidebar-bottom{
  padding:8px 10px 12px;
  border-top:1px solid var(--border-light);
  display:flex;flex-direction:column;gap:2px;
}
.user-menu-btn{
  display:flex;align-items:center;gap:10px;
  padding:8px 10px;border-radius:var(--radius-sm);
  transition:background var(--trans);width:100%;text-align:left;
  cursor:pointer;
}
.user-menu-btn:hover{background:var(--surface)}
.user-avatar{
  width:32px;height:32px;border-radius:50%;
  background:linear-gradient(135deg,#19c37d,#1a8cff);
  display:flex;align-items:center;justify-content:center;
  font-size:13px;font-weight:700;color:#fff;flex-shrink:0;
}
.user-info{flex:1;overflow:hidden}
.user-name{font-size:13.5px;font-weight:500;color:var(--text);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.user-plan{font-size:11px;color:var(--text-3)}

/* ‚îÄ‚îÄ‚îÄ SIDEBAR OVERLAY (mobile) ‚îÄ‚îÄ‚îÄ */
#sidebarOverlay{
  display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:150;
}
#sidebarOverlay.active{display:block}

/* ‚îÄ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ‚îÄ */
#main{flex:1;display:flex;flex-direction:column;overflow:hidden;position:relative}

/* ‚îÄ‚îÄ‚îÄ TOP BAR ‚îÄ‚îÄ‚îÄ */
#topbar{
  height:52px;display:flex;align-items:center;
  padding:0 16px;gap:8px;
  background:var(--main-bg);
  flex-shrink:0;
}
.topbar-toggle{
  padding:6px;border-radius:var(--radius-sm);
  color:var(--text-2);transition:background var(--trans),color var(--trans);
}
.topbar-toggle:hover{background:var(--surface);color:var(--text)}
.model-pill{
  display:flex;align-items:center;gap:6px;
  padding:6px 12px;border-radius:99px;
  background:var(--surface);
  font-size:14px;font-weight:500;color:var(--text);
  cursor:pointer;transition:background var(--trans);
  border:1px solid var(--border-light);
  white-space:nowrap;
}
.model-pill:hover{background:var(--surface-hover)}
.model-pill-dot{width:8px;height:8px;border-radius:50%;background:var(--accent);flex-shrink:0}
.topbar-spacer{flex:1}
.topbar-actions{display:flex;gap:4px}
.icon-btn{
  padding:6px;border-radius:var(--radius-sm);color:var(--text-2);
  transition:background var(--trans),color var(--trans);
  display:flex;align-items:center;justify-content:center;
}
.icon-btn:hover{background:var(--surface);color:var(--text)}

/* ‚îÄ‚îÄ‚îÄ CHAT AREA ‚îÄ‚îÄ‚îÄ */
#chatWrap{
  flex:1;overflow-y:auto;
  display:flex;flex-direction:column;
  scroll-behavior:smooth;
}

/* ‚îÄ‚îÄ‚îÄ WELCOME / EMPTY ‚îÄ‚îÄ‚îÄ */
#welcome{
  flex:1;display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  padding:2rem 1rem 0;
  text-align:center;
  animation:fadeUp .4s ease both;
}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.welcome-logo{
  width:56px;height:56px;
  background:linear-gradient(135deg,#19c37d,#1a8cff);
  border-radius:14px;
  display:flex;align-items:center;justify-content:center;
  margin-bottom:20px;
  box-shadow:0 8px 32px rgba(25,195,125,.25);
}
.welcome-title{font-size:26px;font-weight:600;margin-bottom:6px;color:var(--text)}
.welcome-sub{font-size:15px;color:var(--text-3);margin-bottom:28px}
.welcome-suggestions{
  display:flex;flex-wrap:wrap;gap:8px;
  justify-content:center;max-width:600px;margin:0 auto;
}
.suggestion-card{
  display:flex;align-items:center;gap:8px;
  padding:10px 16px;
  border:1px solid var(--border);
  border-radius:99px;
  font-size:13.5px;color:var(--text-2);
  cursor:pointer;transition:all var(--trans);
  background:transparent;
}
.suggestion-card:hover{background:var(--surface);color:var(--text);border-color:var(--surface-hover)}

/* ‚îÄ‚îÄ‚îÄ MESSAGES ‚îÄ‚îÄ‚îÄ */
.messages-container{
  width:100%;max-width:760px;margin:0 auto;
  padding:24px 20px 8px;
  display:flex;flex-direction:column;gap:4px;
}
.msg{
  display:flex;gap:12px;
  padding:6px 0;
  animation:fadeUp .25s ease both;
}
.msg.user{flex-direction:row-reverse}
.msg-avatar{
  width:30px;height:30px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:13px;font-weight:700;
  flex-shrink:0;margin-top:2px;
}
.msg-avatar.bot-av{
  background:linear-gradient(135deg,#19c37d,#1a8cff);color:#fff;
}
.msg-avatar.user-av{
  background:var(--surface-hover);color:var(--text-2);
}
.msg-bubble{
  max-width:min(85%,620px);
  font-size:15px;line-height:1.75;color:var(--text);
}
.msg.user .msg-bubble{
  background:var(--surface);
  padding:12px 16px;
  border-radius:18px 18px 4px 18px;
  color:var(--text);
}
.msg.bot .msg-bubble{padding:4px 0}
.msg-actions{
  display:flex;gap:4px;margin-top:8px;opacity:0;
  transition:opacity .15s;
}
.msg.bot:hover .msg-actions{opacity:1}
.msg-act-btn{
  padding:5px 8px;border-radius:6px;font-size:12px;
  color:var(--text-3);display:flex;align-items:center;gap:5px;
  transition:background var(--trans),color var(--trans);
}
.msg-act-btn:hover{background:var(--surface);color:var(--text-2)}

/* code */
.msg-bubble pre{
  background:#1a1a1a;border-radius:10px;padding:14px;margin:10px 0;
  overflow-x:auto;border:1px solid var(--border);position:relative;
}
.msg-bubble code{font-family:'JetBrains Mono','Fira Code',monospace;font-size:13px;color:#e0e0e0}
.msg-bubble p code{background:var(--surface);padding:1px 6px;border-radius:4px;font-size:13px}
.msg-bubble p{margin-bottom:8px}
.msg-bubble p:last-child{margin-bottom:0}
.msg-bubble ul,.msg-bubble ol{padding-left:20px;margin:8px 0}
.msg-bubble li{margin:4px 0}
.msg-bubble h3{font-size:15px;font-weight:600;margin:12px 0 4px}
.code-header{display:flex;align-items:center;justify-content:space-between;padding:6px 14px;background:#111;border-radius:10px 10px 0 0;margin-bottom:-10px;font-size:12px;color:var(--text-3)}
.copy-code{padding:3px 8px;border-radius:4px;background:var(--surface);color:var(--text-2);font-size:12px;transition:background var(--trans)}
.copy-code:hover{background:var(--surface-hover);color:var(--text)}

/* typing */
.typing-bubble{display:flex;gap:5px;padding:8px 0;align-items:center}
.typing-dot{width:7px;height:7px;background:var(--text-3);border-radius:50%;animation:tdot 1.3s infinite}
.typing-dot:nth-child(2){animation-delay:.2s}
.typing-dot:nth-child(3){animation-delay:.4s}
@keyframes tdot{0%,60%,100%{opacity:.3;transform:scale(.9)}30%{opacity:1;transform:scale(1)}}

/* ‚îÄ‚îÄ‚îÄ INPUT AREA ‚îÄ‚îÄ‚îÄ */
#inputArea{
  padding:12px 16px 20px;
  background:var(--main-bg);
}
.input-wrap{
  max-width:760px;margin:0 auto;
  display:flex;flex-direction:column;gap:8px;
}
/* AdSense strip */
.ads-strip{text-align:center;min-height:0}

.input-box{
  display:flex;align-items:flex-end;gap:8px;
  background:var(--input-bg);
  border-radius:var(--radius-lg);
  border:1px solid var(--border);
  padding:10px 10px 10px 14px;
  transition:border-color .2s,box-shadow .2s;
}
.input-box:focus-within{
  border-color:rgba(25,195,125,.4);
  box-shadow:0 0 0 3px rgba(25,195,125,.08);
}
.input-left{display:flex;gap:2px;flex-shrink:0;align-items:flex-end;padding-bottom:1px}
.attach-btn,.voice-btn{
  padding:7px;border-radius:var(--radius-sm);color:var(--text-3);
  transition:background var(--trans),color var(--trans);
}
.attach-btn:hover,.voice-btn:hover{background:var(--surface-hover);color:var(--text-2)}
#msgInput{
  flex:1;resize:none;background:transparent;
  color:var(--text);font-size:15px;line-height:1.6;
  max-height:180px;overflow-y:auto;
  scrollbar-width:none;
}
#msgInput::-webkit-scrollbar{display:none}
#msgInput::placeholder{color:var(--text-3)}
.send-btn{
  width:36px;height:36px;border-radius:9px;
  background:var(--accent);color:#fff;
  display:flex;align-items:center;justify-content:center;
  transition:background var(--trans),opacity var(--trans);
  flex-shrink:0;align-self:flex-end;
}
.send-btn:hover{background:var(--accent-hover)}
.send-btn:disabled{background:var(--surface-hover);cursor:not-allowed}
.input-hint{
  font-size:11.5px;color:var(--text-3);text-align:center;
}
.input-hint a{color:var(--text-3);text-decoration:underline;text-underline-offset:2px}

/* ‚îÄ‚îÄ‚îÄ MODALS ‚îÄ‚îÄ‚îÄ */
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.65);
  z-index:500;display:flex;align-items:center;justify-content:center;
  padding:16px;animation:fadeIn .2s ease;
}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal-overlay.hidden{display:none}
.modal{
  background:#1e1e1e;border:1px solid var(--border);
  border-radius:20px;width:100%;max-height:90vh;overflow-y:auto;
  animation:slideUp .25s ease;
}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.modal-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:20px 24px 0;
}
.modal-title{font-size:18px;font-weight:600}
.modal-close{
  padding:6px;border-radius:var(--radius-sm);color:var(--text-3);
  transition:background var(--trans),color var(--trans);
}
.modal-close:hover{background:var(--surface);color:var(--text)}
.modal-body{padding:20px 24px 24px}

/* ‚îÄ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ‚îÄ */
.auth-modal{max-width:420px}
.auth-logo-row{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:24px}
.auth-logo-icon{
  width:40px;height:40px;
  background:linear-gradient(135deg,#19c37d,#1a8cff);
  border-radius:10px;display:flex;align-items:center;justify-content:center;
}
.auth-title{font-size:22px;font-weight:600;text-align:center;margin-bottom:6px}
.auth-sub{font-size:14px;color:var(--text-3);text-align:center;margin-bottom:20px}
.auth-tabs-row{
  display:flex;gap:0;margin-bottom:20px;
  background:var(--surface);border-radius:10px;padding:4px;
}
.auth-tab{
  flex:1;padding:8px;border-radius:7px;font-size:14px;font-weight:500;
  color:var(--text-3);transition:all .15s;
}
.auth-tab.active{background:var(--surface-hover);color:var(--text)}
.form-field{margin-bottom:14px}
.form-field label{display:block;font-size:13px;color:var(--text-2);margin-bottom:6px;font-weight:500}
.form-field input{
  width:100%;padding:11px 14px;
  background:var(--surface);border:1px solid var(--border);
  border-radius:10px;font-size:14px;color:var(--text);
  transition:border-color .2s,box-shadow .2s;
}
.form-field input:focus{
  border-color:rgba(25,195,125,.5);
  box-shadow:0 0 0 3px rgba(25,195,125,.08);
}
.auth-submit{
  width:100%;padding:12px;
  background:var(--accent);color:#fff;
  border-radius:10px;font-size:15px;font-weight:600;
  transition:background .15s,transform .1s;margin-top:4px;
}
.auth-submit:hover{background:var(--accent-hover);transform:translateY(-1px)}
.auth-submit:active{transform:translateY(0)}
.auth-divider{
  display:flex;align-items:center;gap:12px;margin:16px 0;color:var(--text-3);font-size:13px;
}
.auth-divider::before,.auth-divider::after{content:'';flex:1;height:1px;background:var(--border)}
.auth-guest{
  width:100%;padding:11px;background:var(--surface);color:var(--text-2);
  border-radius:10px;font-size:14px;border:1px solid var(--border);
  transition:all .15s;
}
.auth-guest:hover{background:var(--surface-hover);color:var(--text)}
.auth-terms{font-size:12px;color:var(--text-3);text-align:center;margin-top:16px;line-height:1.6}
.auth-terms a{color:var(--accent);text-decoration:none}

/* ‚îÄ‚îÄ‚îÄ SETTINGS ‚îÄ‚îÄ‚îÄ */
.settings-modal{max-width:560px}
.settings-nav{
  display:flex;flex-direction:column;gap:2px;
  padding:8px 0;border-right:1px solid var(--border);width:160px;flex-shrink:0;
}
.settings-layout{display:flex;min-height:380px}
.settings-nav-btn{
  display:flex;align-items:center;gap:9px;
  padding:9px 14px;border-radius:var(--radius-sm);
  font-size:13.5px;color:var(--text-2);width:100%;text-align:left;
  transition:background var(--trans),color var(--trans);
}
.settings-nav-btn:hover{background:var(--surface);color:var(--text)}
.settings-nav-btn.active{background:var(--surface);color:var(--text)}
.settings-panel{flex:1;padding:0 0 0 20px;overflow-y:auto}
.settings-section{margin-bottom:24px}
.settings-section-title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-3);margin-bottom:12px}
.settings-row{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 14px;background:var(--surface);border-radius:10px;margin-bottom:6px;
}
.settings-row-info h4{font-size:14px;font-weight:500;margin-bottom:2px}
.settings-row-info p{font-size:12.5px;color:var(--text-3)}
.settings-select{
  background:var(--input-bg);border:1px solid var(--border);
  border-radius:8px;color:var(--text);padding:6px 10px;font-size:13px;
  cursor:pointer;
}
.settings-select:focus{outline:none;border-color:rgba(25,195,125,.4)}
/* toggle */
.toggle-wrap{
  width:44px;height:26px;border-radius:99px;background:var(--border);
  cursor:pointer;transition:background .2s;position:relative;flex-shrink:0;
}
.toggle-wrap.on{background:var(--accent)}
.toggle-knob{
  width:20px;height:20px;border-radius:50%;background:#fff;
  position:absolute;top:3px;left:3px;
  transition:transform .2s;box-shadow:0 1px 4px rgba(0,0,0,.3);
}
.toggle-wrap.on .toggle-knob{transform:translateX(18px)}

/* ‚îÄ‚îÄ‚îÄ PROFILE ‚îÄ‚îÄ‚îÄ */
.profile-modal{max-width:420px}
.profile-top{
  display:flex;flex-direction:column;align-items:center;text-align:center;
  padding:8px 0 20px;border-bottom:1px solid var(--border);margin-bottom:20px;
}
.profile-av-lg{
  width:72px;height:72px;border-radius:50%;
  background:linear-gradient(135deg,#19c37d,#1a8cff);
  display:flex;align-items:center;justify-content:center;
  font-size:28px;font-weight:700;color:#fff;margin-bottom:12px;
}
.profile-name-lg{font-size:20px;font-weight:600}
.profile-email-lg{font-size:13px;color:var(--text-3);margin-top:3px}
.profile-badge{
  display:inline-flex;align-items:center;gap:6px;
  padding:4px 12px;background:rgba(25,195,125,.12);
  border-radius:99px;font-size:12px;color:var(--accent);font-weight:600;
  margin-top:10px;
}
.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:20px}
.stat-card{
  background:var(--surface);border-radius:12px;
  padding:14px 10px;text-align:center;
}
.stat-val{font-size:22px;font-weight:700;color:var(--text)}
.stat-lbl{font-size:11.5px;color:var(--text-3);margin-top:2px}
.logout-btn{
  width:100%;padding:11px;background:rgba(239,68,68,.1);color:#ef4444;
  border-radius:10px;font-size:14px;font-weight:600;
  border:1px solid rgba(239,68,68,.2);
  transition:background .15s,border-color .15s;
}
.logout-btn:hover{background:rgba(239,68,68,.2);border-color:rgba(239,68,68,.4)}

/* ‚îÄ‚îÄ‚îÄ USER CONTEXT MENU ‚îÄ‚îÄ‚îÄ */
.ctx-menu{
  position:fixed;background:#1e1e1e;border:1px solid var(--border);
  border-radius:12px;padding:6px;z-index:600;min-width:200px;
  box-shadow:0 16px 48px rgba(0,0,0,.5);
  animation:slideUp .15s ease;
}
.ctx-menu.hidden{display:none}
.ctx-item{
  display:flex;align-items:center;gap:10px;
  padding:9px 12px;border-radius:8px;
  font-size:13.5px;color:var(--text-2);
  cursor:pointer;transition:background var(--trans),color var(--trans);
  width:100%;text-align:left;
}
.ctx-item:hover{background:var(--surface);color:var(--text)}
.ctx-item.danger{color:#ef4444}
.ctx-item.danger:hover{background:rgba(239,68,68,.1);color:#ef4444}
.ctx-sep{height:1px;background:var(--border);margin:4px 0}

/* ‚îÄ‚îÄ‚îÄ MOBILE ‚îÄ‚îÄ‚îÄ */
@media(max-width:768px){
  #sidebar{position:fixed;top:0;left:0;height:100%;transform:translateX(-100%);width:var(--sidebar-w)!important}
  #sidebar.mobile-open{transform:translateX(0)}
  #sidebarOverlay.active{display:block}
  .messages-container{padding:16px 12px 8px}
  .welcome-suggestions{padding:0 8px}
  .model-pill-label{display:none}
}
</style>

</head>
<body>
<div id="app">

  <!-- SIDEBAR -->

  <aside id="sidebar">
    <div class="sidebar-top">
      <div class="sidebar-brand">
        <div class="brand-logo">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.2">
            <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z"/>
          </svg>
        </div>
        <div>
          <div class="brand-name">Aion</div>
          <div class="brand-byline">S.ai+ Apps</div>
        </div>
      </div>
      <button class="sidebar-btn" onclick="newChat()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        <span>Nova conversa</span>
      </button>
      <button class="sidebar-btn" onclick="openSearch()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
        </svg>
        <span>Buscar conversas</span>
      </button>
    </div>

```
<div class="sidebar-section-label">Hoje</div>
<div class="history-list" id="historyList">
  <!-- Populated by JS -->
</div>

<div class="sidebar-bottom">
  <button class="sidebar-btn" onclick="openSettings('planos')">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
    </svg>
    <span>Planos & Upgrade</span>
  </button>
  <div class="user-menu-btn" onclick="toggleCtxMenu(event)">
    <div class="user-avatar" id="sidebarAv">?</div>
    <div class="user-info">
      <div class="user-name" id="sidebarName">Fazer login</div>
      <div class="user-plan" id="sidebarPlan">Gratuito</div>
    </div>
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:var(--text-3)">
      <path d="M8 9l4-4 4 4M8 15l4 4 4-4"/>
    </svg>
  </div>
</div>
```

  </aside>

  <!-- MOBILE OVERLAY -->

  <div id="sidebarOverlay" onclick="closeSidebar()"></div>

  <!-- CONTEXT MENU -->

  <div class="ctx-menu hidden" id="ctxMenu">
    <button class="ctx-item" onclick="openProfile();closeCtx()">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
      Meu Perfil
    </button>
    <button class="ctx-item" onclick="openSettings();closeCtx()">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"/>
        <path d="M12 1v6m0 6v6M1 12h6m6 0h6"/>
      </svg>
      Configura√ß√µes
    </button>
    <div class="ctx-sep"></div>
    <button class="ctx-item danger" onclick="doLogout();closeCtx()">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"/>
      </svg>
      Sair
    </button>
  </div>

  <!-- MAIN -->

  <main id="main">

```
<!-- TOPBAR -->
<div id="topbar">
  <button class="topbar-toggle icon-btn" onclick="toggleSidebar()">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
    </svg>
  </button>
  <button class="model-pill" onclick="openSettings('modelo')">
    <span class="model-pill-dot"></span>
    <span class="model-pill-label">Aion Advanced</span>
    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
      <path d="M6 9l6 6 6-6"/>
    </svg>
  </button>
  <div class="topbar-spacer"></div>
  <div class="topbar-actions">
    <button class="icon-btn" onclick="shareChat()">
      <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8M16 6l-4-4-4 4M12 2v13"/>
      </svg>
    </button>
    <button class="icon-btn" onclick="openProfile()">
      <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
    </button>
  </div>
</div>

<!-- CHAT -->
<div id="chatWrap">
  <div id="welcome">
    <div class="welcome-logo">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.2">
        <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z"/>
      </svg>
    </div>
    <div class="welcome-title">Como posso ajudar?</div>
    <div class="welcome-sub">Aion ‚Äî seu assistente de IA inteligente</div>
    <div class="welcome-suggestions">
      <button class="suggestion-card" onclick="suggest('Crie um resumo do que √© IA generativa')">
        ü§ñ O que √© IA generativa?
      </button>
      <button class="suggestion-card" onclick="suggest('Me ajude a escrever um e-mail profissional')">
        ‚úâÔ∏è Escrever e-mail profissional
      </button>
      <button class="suggestion-card" onclick="suggest('Explique como funciona o Python para iniciantes')">
        üêç Aprender Python do zero
      </button>
      <button class="suggestion-card" onclick="suggest('D√™-me 5 dicas de produtividade para trabalho remoto')">
        ‚ö° Dicas de produtividade
      </button>
      <button class="suggestion-card" onclick="suggest('Crie uma hist√≥ria curta e criativa sobre o futuro')">
        üìñ Criar hist√≥ria criativa
      </button>
      <button class="suggestion-card" onclick="suggest('Analise os pr√≥s e contras do trabalho remoto')">
        üîç Analisar trabalho remoto
      </button>
    </div>
  </div>
  <div class="messages-container" id="msgList" style="display:none"></div>
</div>

<!-- INPUT -->
<div id="inputArea">
  <div class="input-wrap">
    <!-- AdSense Banner -->
    <div class="ads-strip">
      <ins class="adsbygoogle"
        style="display:block;height:50px"
        data-ad-client="ca-pub-YOUR_ADSENSE_ID"
        data-ad-slot="YOUR_AD_SLOT"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    </div>
    <div class="input-box" id="inputBox">
      <div class="input-left">
        <button class="attach-btn icon-btn" onclick="attachFile()" title="Anexar arquivo">
          <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/>
          </svg>
        </button>
        <button class="voice-btn icon-btn" onclick="startVoice()" title="Voz">
          <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3zM19 10v2a7 7 0 01-14 0v-2M12 19v4M8 23h8"/>
          </svg>
        </button>
      </div>
      <textarea id="msgInput"
        rows="1"
        placeholder="Mensagem para Aion"
        onkeydown="onKey(event)"
        oninput="growInput(this)"></textarea>
      <button class="send-btn" id="sendBtn" onclick="sendMsg()" disabled>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </button>
    </div>
    <div class="input-hint">
      Aion pode cometer erros. Verifique informa√ß√µes importantes. &nbsp;¬∑&nbsp;
      <a href="https://orpheostudio.com.br/legal/termos" target="_blank">Termos</a> &nbsp;¬∑&nbsp;
      <a href="https://orpheostudio.com.br/legal/privacidade" target="_blank">Privacidade</a>
    </div>
  </div>
</div>
```

  </main>
</div>

<!-- ‚îÄ‚îÄ‚îÄ AUTH MODAL ‚îÄ‚îÄ‚îÄ -->

<div class="modal-overlay" id="authModal">
  <div class="modal auth-modal">
    <div class="modal-body">
      <div class="auth-logo-row">
        <div class="auth-logo-icon">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.2">
            <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z"/>
          </svg>
        </div>
      </div>
      <div class="auth-title" id="authTitle">Entrar no Aion</div>
      <div class="auth-sub">Salve seu hist√≥rico e acesse em qualquer dispositivo</div>
      <div class="auth-tabs-row">
        <button class="auth-tab active" id="tabLogin" onclick="authTab('login')">Entrar</button>
        <button class="auth-tab" id="tabReg" onclick="authTab('reg')">Criar conta</button>
      </div>

```
  <!-- Login -->
  <div id="formLogin">
    <div class="form-field">
      <label>E-mail</label>
      <input type="email" id="loginEmail" placeholder="seu@email.com">
    </div>
    <div class="form-field">
      <label>Senha</label>
      <input type="password" id="loginPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')doLogin()">
    </div>
    <button class="auth-submit" onclick="doLogin()">Entrar</button>
    <div class="auth-divider">ou</div>
    <button class="auth-guest" onclick="doGuest()">üöÄ Continuar como visitante</button>
  </div>

  <!-- Register -->
  <div id="formReg" style="display:none">
    <div class="form-field">
      <label>Nome</label>
      <input type="text" id="regName" placeholder="Seu nome">
    </div>
    <div class="form-field">
      <label>E-mail</label>
      <input type="email" id="regEmail" placeholder="seu@email.com">
    </div>
    <div class="form-field">
      <label>Senha</label>
      <input type="password" id="regPass" placeholder="M√≠nimo 6 caracteres" onkeydown="if(event.key==='Enter')doRegister()">
    </div>
    <button class="auth-submit" onclick="doRegister()">Criar conta</button>
  </div>

  <div class="auth-terms">
    Ao continuar, voc√™ aceita nossos
    <a href="https://orpheostudio.com.br/legal/termos" target="_blank">Termos de Uso</a> e
    <a href="https://orpheostudio.com.br/legal/privacidade" target="_blank">Pol√≠tica de Privacidade</a>.
  </div>
</div>
```

  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ SETTINGS MODAL ‚îÄ‚îÄ‚îÄ -->

<div class="modal-overlay hidden" id="settingsModal">
  <div class="modal settings-modal">
    <div class="modal-header">
      <div class="modal-title">Configura√ß√µes</div>
      <button class="modal-close icon-btn" onclick="closeSettings()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="settings-layout">
        <!-- Nav -->
        <div class="settings-nav">
          <button class="settings-nav-btn active" onclick="setNav(this,'geral')">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M1 12h6m6 0h6"/></svg>
            Geral
          </button>
          <button class="settings-nav-btn" onclick="setNav(this,'modelo')">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z"/></svg>
            Modelo de IA
          </button>
          <button class="settings-nav-btn" onclick="setNav(this,'aparencia')">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
            Apar√™ncia
          </button>
          <button class="settings-nav-btn" onclick="setNav(this,'privacidade')">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
            Privacidade
          </button>
          <button class="settings-nav-btn" onclick="setNav(this,'notif')">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"/></svg>
            Notifica√ß√µes
          </button>
          <button class="settings-nav-btn" onclick="setNav(this,'planos')">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            Planos
          </button>
          <button class="settings-nav-btn" onclick="setNav(this,'dados')">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="21 8 21 21 3 21 3 8"/><rect x="1" y="3" width="22" height="5"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
            Dados
          </button>
        </div>

```
    <!-- Panels -->
    <div class="settings-panel">

      <!-- GERAL -->
      <div id="sp-geral" class="settings-section">
        <div class="settings-section-title">Geral</div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Idioma</h4><p>Idioma da interface</p></div>
          <select class="settings-select"><option>Portugu√™s (BR)</option><option>English</option><option>Espa√±ol</option></select>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Enviar com Enter</h4><p>Shift+Enter para quebrar linha</p></div>
          <div class="toggle-wrap on" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Mostrar c√≥digo formatado</h4><p>Realce de sintaxe em respostas</p></div>
          <div class="toggle-wrap on" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Respostas em voz alta</h4><p>Leitura autom√°tica das respostas</p></div>
          <div class="toggle-wrap" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Sugest√µes r√°pidas</h4><p>Mostrar sugest√µes na tela inicial</p></div>
          <div class="toggle-wrap on" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
      </div>

      <!-- MODELO -->
      <div id="sp-modelo" class="settings-section" style="display:none">
        <div class="settings-section-title">Modelo de IA</div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Modelo ativo</h4><p>Vers√£o usada nas conversas</p></div>
          <select class="settings-select">
            <option>Aion Advanced</option>
            <option>Aion Standard</option>
            <option>Aion Fast</option>
          </select>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Temperatura</h4><p>Criatividade das respostas</p></div>
          <select class="settings-select"><option>Equilibrado</option><option>Criativo</option><option>Preciso</option></select>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Comprimento das respostas</h4><p>Tamanho padr√£o</p></div>
          <select class="settings-select"><option>Autom√°tico</option><option>Curto</option><option>Detalhado</option></select>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Mem√≥ria contextual</h4><p>Lembrar prefer√™ncias do usu√°rio</p></div>
          <div class="toggle-wrap on" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
      </div>

      <!-- APAR√äNCIA -->
      <div id="sp-aparencia" class="settings-section" style="display:none">
        <div class="settings-section-title">Apar√™ncia</div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Tema</h4><p>Esquema de cores da interface</p></div>
          <select class="settings-select"><option>Escuro (Padr√£o)</option><option>Claro</option><option>Sistema</option></select>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Tamanho da fonte</h4><p>Tamanho do texto das mensagens</p></div>
          <select class="settings-select"><option>M√©dio</option><option>Pequeno</option><option>Grande</option></select>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Modo compacto</h4><p>Menor espa√ßamento entre mensagens</p></div>
          <div class="toggle-wrap" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Anima√ß√µes</h4><p>Efeitos de transi√ß√£o</p></div>
          <div class="toggle-wrap on" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
      </div>

      <!-- PRIVACIDADE -->
      <div id="sp-privacidade" class="settings-section" style="display:none">
        <div class="settings-section-title">Privacidade & Seguran√ßa</div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Salvar hist√≥rico</h4><p>Guardar conversas no dispositivo</p></div>
          <div class="toggle-wrap on" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>An√°lise de uso</h4><p>Enviar dados an√¥nimos para melhoria</p></div>
          <div class="toggle-wrap on" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Termos de Uso</h4><p>Ler os termos completos</p></div>
          <a href="https://orpheostudio.com.br/legal/termos" target="_blank" style="font-size:13px;color:var(--accent)">Ver ‚Üí</a>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Pol√≠tica de Privacidade</h4><p>Ver nossa pol√≠tica completa</p></div>
          <a href="https://orpheostudio.com.br/legal/privacidade" target="_blank" style="font-size:13px;color:var(--accent)">Ver ‚Üí</a>
        </div>
      </div>

      <!-- NOTIFICA√á√ïES -->
      <div id="sp-notif" class="settings-section" style="display:none">
        <div class="settings-section-title">Notifica√ß√µes</div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Notifica√ß√µes push</h4><p>Alertas no navegador</p></div>
          <div class="toggle-wrap on" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Som</h4><p>Toque ao receber resposta</p></div>
          <div class="toggle-wrap" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>E-mail de novidades</h4><p>Receber atualiza√ß√µes por e-mail</p></div>
          <div class="toggle-wrap on" onclick="this.classList.toggle('on')"><div class="toggle-knob"></div></div>
        </div>
      </div>

      <!-- PLANOS -->
      <div id="sp-planos" class="settings-section" style="display:none">
        <div class="settings-section-title">Plano Atual</div>
        <div style="background:linear-gradient(135deg,rgba(25,195,125,.12),rgba(26,140,255,.12));border:1px solid rgba(25,195,125,.25);border-radius:12px;padding:16px;margin-bottom:12px">
          <div style="font-size:18px;font-weight:700;margin-bottom:4px">Plano Gratuito</div>
          <div style="font-size:13px;color:var(--text-3)">Acesso b√°sico ao Aion</div>
          <div style="margin-top:12px;font-size:13px;color:var(--text-2)">‚úì Conversas ilimitadas<br>‚úì Modelo padr√£o<br>‚úì Hist√≥rico local</div>
        </div>
        <div style="background:linear-gradient(135deg,rgba(25,195,125,.2),rgba(26,140,255,.15));border:1px solid rgba(25,195,125,.4);border-radius:12px;padding:16px">
          <div style="font-size:18px;font-weight:700;margin-bottom:4px">Aion Pro ‚≠ê</div>
          <div style="font-size:13px;color:var(--text-3)">Acesso completo a todos os recursos</div>
          <div style="margin-top:12px;font-size:13px;color:var(--text-2)">‚úì Tudo do gratuito<br>‚úì Aion Advanced (modelo premium)<br>‚úì Mem√≥ria persistente<br>‚úì Upload de arquivos e imagens<br>‚úì Prioridade de resposta</div>
          <button style="margin-top:14px;width:100%;padding:10px;background:var(--accent);color:#fff;border-radius:9px;font-size:14px;font-weight:600;border:none;cursor:pointer">Obter Aion Pro</button>
        </div>
      </div>

      <!-- DADOS -->
      <div id="sp-dados" class="settings-section" style="display:none">
        <div class="settings-section-title">Gerenciar Dados</div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Exportar conversas</h4><p>Baixar hist√≥rico completo em .txt</p></div>
          <button onclick="exportData()" style="padding:7px 14px;background:var(--surface);border:1px solid var(--border);border-radius:8px;font-size:13px;color:var(--text-2);cursor:pointer">Exportar</button>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Limpar hist√≥rico</h4><p>Apagar todas as conversas salvas</p></div>
          <button onclick="clearHistory()" style="padding:7px 14px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);border-radius:8px;font-size:13px;color:#ef4444;cursor:pointer">Limpar</button>
        </div>
        <div class="settings-row">
          <div class="settings-row-info"><h4>Excluir conta</h4><p>Remover permanentemente sua conta</p></div>
          <button style="padding:7px 14px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);border-radius:8px;font-size:13px;color:#ef4444;cursor:pointer">Excluir</button>
        </div>
      </div>

    </div>
  </div>
</div>
```

  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ PROFILE MODAL ‚îÄ‚îÄ‚îÄ -->

<div class="modal-overlay hidden" id="profileModal">
  <div class="modal profile-modal">
    <div class="modal-header">
      <div class="modal-title">Meu Perfil</div>
      <button class="modal-close icon-btn" onclick="closeProfile()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="profile-top">
        <div class="profile-av-lg" id="profileAvLg">?</div>
        <div class="profile-name-lg" id="profileNameLg">Usu√°rio</div>
        <div class="profile-email-lg" id="profileEmailLg">‚Äî</div>
        <div class="profile-badge">
          <span>‚ú¶</span> Plano Gratuito
        </div>
      </div>

```
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-val" id="statMsg">0</div>
      <div class="stat-lbl">Mensagens</div>
    </div>
    <div class="stat-card">
      <div class="stat-val" id="statChats">0</div>
      <div class="stat-lbl">Conversas</div>
    </div>
    <div class="stat-card">
      <div class="stat-val" id="statDays">1</div>
      <div class="stat-lbl">Dias</div>
    </div>
  </div>

  <div class="settings-section">
    <div class="settings-section-title">Informa√ß√µes da Conta</div>
    <div class="form-field">
      <label>Nome</label>
      <input type="text" id="editName" style="background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:10px 14px;font-size:14px;width:100%">
    </div>
    <div class="form-field">
      <label>E-mail</label>
      <input type="email" id="editEmail" style="background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:10px 14px;font-size:14px;width:100%">
    </div>
    <button onclick="saveProfile()" style="width:100%;padding:11px;background:var(--accent);color:#fff;border-radius:10px;font-size:14px;font-weight:600;border:none;cursor:pointer;margin-top:4px">Salvar altera√ß√µes</button>
  </div>

  <button class="logout-btn" onclick="doLogout();closeProfile()">Sair da conta</button>
</div>
```

  </div>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const S = {
  user: null,
  chats: [],          // [{id, title, msgs:[]}]
  activeChatId: null,
  msgCount: 0,
  typing: false,
};

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
(function init(){
  const saved = lsGet('aion_user');
  if(saved){
    S.user = saved;
    S.chats = lsGet('aion_chats') || [];
    S.msgCount = lsGet('aion_msgcount') || 0;
    closeAuthModal();
    refreshUI();
    renderHistory();
  }
  // Enable send btn on input
  document.getElementById('msgInput').addEventListener('input', function(){
    document.getElementById('sendBtn').disabled = !this.value.trim();
  });
  // AdSense
  try{(adsbygoogle=window.adsbygoogle||[]).push({});}catch(e){}
  // PWA service worker
  if('serviceWorker' in navigator) navigator.serviceWorker.register('service-worker.js').catch(()=>{});
})();

// ‚îÄ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function doLogin(){
  const email = document.getElementById('loginEmail').value.trim();
  const pass  = document.getElementById('loginPass').value;
  if(!email){alert('Informe seu e-mail.');return;}
  if(!pass){alert('Informe sua senha.');return;}
  const name = email.split('@')[0].replace(/[._]/g,' ').replace(/\b\w/g,c=>c.toUpperCase());
  loginAs(name, email);
}
function doRegister(){
  const name  = document.getElementById('regName').value.trim();
  const email = document.getElementById('regEmail').value.trim();
  const pass  = document.getElementById('regPass').value;
  if(!name||!email||!pass){alert('Preencha todos os campos.');return;}
  if(pass.length<6){alert('Senha m√≠nima: 6 caracteres.');return;}
  loginAs(name, email);
}
function doGuest(){
  loginAs('Visitante','visitante@aion.app');
}
function loginAs(name, email){
  S.user = {name, email, av: name.charAt(0).toUpperCase(), since: Date.now()};
  lsSet('aion_user', S.user);
  closeAuthModal();
  refreshUI();
  toast('Bem-vindo, '+name+'! üëã');
}
function doLogout(){
  if(!confirm('Tem certeza que deseja sair?')) return;
  S.user=null; S.chats=[]; S.activeChatId=null;
  lsSet('aion_user',null); lsSet('aion_chats',[]);
  location.reload();
}
function authTab(t){
  document.getElementById('tabLogin').classList.toggle('active',t==='login');
  document.getElementById('tabReg').classList.toggle('active',t==='reg');
  document.getElementById('formLogin').style.display = t==='login'?'':'none';
  document.getElementById('formReg').style.display   = t==='reg'?'':'none';
  document.getElementById('authTitle').textContent   = t==='login'?'Entrar no Aion':'Criar sua conta';
}
function closeAuthModal(){document.getElementById('authModal').classList.add('hidden');}

// ‚îÄ‚îÄ‚îÄ UI REFRESH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function refreshUI(){
  if(!S.user) return;
  const av = S.user.av||'?';
  q('#sidebarAv').textContent      = av;
  q('#sidebarName').textContent    = S.user.name;
  q('#profileAvLg').textContent    = av;
  q('#profileNameLg').textContent  = S.user.name;
  q('#profileEmailLg').textContent = S.user.email;
  q('#editName').value             = S.user.name;
  q('#editEmail').value            = S.user.email;
  // stats
  q('#statMsg').textContent   = S.msgCount;
  q('#statChats').textContent = S.chats.length;
  const days = Math.max(1, Math.floor((Date.now()-(S.user.since||Date.now()))/(864e5))+1);
  q('#statDays').textContent  = days;
}

// ‚îÄ‚îÄ‚îÄ CHAT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function newChat(){
  S.activeChatId = null;
  q('#welcome').style.display  = '';
  q('#msgList').style.display  = 'none';
  q('#msgList').innerHTML      = '';
  closeSidebar();
  renderHistory();
}

function sendMsg(){
  const input = q('#msgInput');
  const text  = input.value.trim();
  if(!text || S.typing) return;
  input.value = ''; input.style.height='auto';
  q('#sendBtn').disabled = true;

  // Create chat if needed
  if(!S.activeChatId){
    const chat = {id:Date.now()+'', title:text.substring(0,40), msgs:[]};
    S.chats.unshift(chat);
    S.activeChatId = chat.id;
    q('#welcome').style.display = 'none';
    q('#msgList').style.display = '';
    renderHistory();
  }

  const chat = getChat();
  if(!chat) return;

  const userMsg = {role:'user', text, time:now()};
  chat.msgs.push(userMsg);
  appendMsg(userMsg);
  S.msgCount++;
  lsSet('aion_chats', S.chats);
  lsSet('aion_msgcount', S.msgCount);
  refreshUI();

  // Bot reply
  S.typing=true;
  const typingEl = showTyping();
  const delay = 900 + Math.random()*1200;
  setTimeout(()=>{
    typingEl.remove();
    const botText = generateReply(text);
    const botMsg  = {role:'bot', text:botText, time:now()};
    chat.msgs.push(botMsg);
    appendMsg(botMsg);
    S.typing=false;
    S.msgCount++;
    lsSet('aion_chats', S.chats);
    lsSet('aion_msgcount', S.msgCount);
    refreshUI();
  }, delay);
}

function suggest(text){
  q('#msgInput').value = text;
  sendMsg();
}
function sendQuick(t){ suggest(t); }

function appendMsg(msg){
  const isBot = msg.role==='bot';
  const av    = isBot ? 'A' : (S.user?S.user.av:'U');
  const div   = document.createElement('div');
  div.className= 'msg '+(isBot?'bot':'user');
  div.innerHTML = `
    <div class="msg-avatar ${isBot?'bot-av':'user-av'}">${av}</div>
    <div class="msg-bubble">
      ${isBot ? renderMd(msg.text) : esc(msg.text)}
      ${isBot ? `
        <div class="msg-actions">
          <button class="msg-act-btn" onclick="copyTxt(this)">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
            Copiar
          </button>
          <button class="msg-act-btn" onclick="speakMsg(this)">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07"/></svg>
            Ouvir
          </button>
          <button class="msg-act-btn" onclick="regenMsg(this)">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 102.13-9.36L1 10"/></svg>
            Regenerar
          </button>
        </div>` : ''}
    </div>`;
  q('#msgList').appendChild(div);
  scrollBottom();
}

function showTyping(){
  const div = document.createElement('div');
  div.className='msg bot';
  div.innerHTML=`<div class="msg-avatar bot-av">A</div><div class="msg-bubble"><div class="typing-bubble"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div></div></div>`;
  q('#msgList').appendChild(div);
  scrollBottom();
  return div;
}

function scrollBottom(){
  const cw = q('#chatWrap');
  cw.scrollTop = cw.scrollHeight;
}

// ‚îÄ‚îÄ‚îÄ HISTORY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function renderHistory(){
  const list = q('#historyList');
  list.innerHTML='';
  S.chats.forEach(c=>{
    const div=document.createElement('div');
    div.className='history-item'+(c.id===S.activeChatId?' active':'');
    div.innerHTML=`
      <span class="history-item-text">${esc(c.title||'Conversa')}</span>
      <button class="history-item-del" onclick="deleteChat('${c.id}',event)">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
      </button>`;
    div.onclick=(e)=>{if(!e.target.closest('.history-item-del'))loadChat(c.id);};
    list.appendChild(div);
  });
}
function loadChat(id){
  const chat=S.chats.find(c=>c.id===id);
  if(!chat) return;
  S.activeChatId=id;
  q('#welcome').style.display='none';
  q('#msgList').style.display='';
  q('#msgList').innerHTML='';
  chat.msgs.forEach(m=>appendMsg(m));
  closeSidebar();
  renderHistory();
}
function deleteChat(id,e){
  e.stopPropagation();
  S.chats=S.chats.filter(c=>c.id!==id);
  if(S.activeChatId===id) newChat();
  lsSet('aion_chats',S.chats);
  renderHistory();
}
function getChat(){return S.chats.find(c=>c.id===S.activeChatId);}

// ‚îÄ‚îÄ‚îÄ AI REPLIES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function generateReply(text){
  const t=text.toLowerCase();
  if(t.match(/\b(oi|ol√°|ola|hello|hi|bom dia|boa tarde|boa noite)\b/))
    return `Ol√°! üëã Fico feliz em te ver por aqui. Como posso ajudar voc√™ hoje?`;
  if(t.match(/\b(aion|voc√™|voce|quem √©|quem √©s)\b/))
    return `Sou o **Aion**, assistente de intelig√™ncia artificial desenvolvido pela **S.ai+ Apps**.\n\nFui criado para ajudar com conversas, responder perguntas, auxiliar em tarefas criativas e anal√≠ticas, e muito mais!\n\nO que gostaria de explorar hoje?`;
  if(t.match(/\bpython\b/))
    return `√ìtimo! Python √© uma das linguagens mais vers√°teis e amig√°veis. Aqui vai um exemplo b√°sico:\n\n\`\`\`python\n# Ol√°, mundo!\nprint("Ol√°, Aion!")\n\n# Listas e loops\nnomes = ["Ana", "Bruno", "Carlos"]\nfor nome in nomes:\n    print(f"Ol√°, {nome}!")\n\`\`\`\n\nPosso ajudar com:\n- Sintaxe e estruturas\n- Bibliotecas (pandas, numpy, flask‚Ä¶)\n- Debug e otimiza√ß√£o\n- Projetos completos\n\nO que especificamente voc√™ quer aprender?`;
  if(t.match(/\b(ia|intelig√™ncia artificial|gpt|llm|language model|ai generativa)\b/))
    return `**IA Generativa** √© um ramo da intelig√™ncia artificial capaz de criar conte√∫do original ‚Äî texto, imagens, c√≥digo, m√∫sica ‚Äî a partir de padr√µes aprendidos em grandes volumes de dados.\n\n**Como funciona:**\n- Modelos de linguagem (LLMs) s√£o treinados em bilh√µes de textos\n- Aprendem probabilidades de sequ√™ncias de palavras\n- Geram respostas contextualmente relevantes\n\n**Exemplos famosos:**\n- GPT-4 (OpenAI)\n- Gemini (Google)\n- Claude (Anthropic)\n- **Aion** ‚Äî voc√™ est√° usando agora! ‚ö°\n\nQuer saber mais sobre algum aspecto espec√≠fico?`;
  if(t.match(/\b(e-?mail|email|mensagem profissional|carta)\b/))
    return `Claro! Aqui vai um modelo de e-mail profissional:\n\n---\n**Assunto:** [Assunto claro e direto]\n\nPrezado(a) [Nome],\n\nEspero que esteja bem. Escrevo para [motivo principal em uma frase].\n\n[Desenvolvimento: contexto, informa√ß√µes relevantes, o que voc√™ precisa ou oferece]\n\nAgrade√ßo sua aten√ß√£o e fico √† disposi√ß√£o para qualquer esclarecimento.\n\nAtenciosamente,\n[Seu nome]\n[Cargo] | [Empresa]\n[Contato]\n\n---\n\nQuer que eu personalize para uma situa√ß√£o espec√≠fica?`;
  if(t.match(/\b(produtividade|produtivo|foco|concentr|procrastin)\b/))
    return `Aqui est√£o as **5 estrat√©gias mais eficazes** de produtividade:\n\n**1. T√©cnica Pomodoro**\n25 minutos de foco total + 5 minutos de pausa. Repita 4x, depois pausa longa (15-30min).\n\n**2. Matriz de Eisenhower**\nDivida tarefas em: Urgente+Importante ‚Üí Fazer agora. Importante ‚Üí Agendar. Urgente ‚Üí Delegar. Nenhum dos dois ‚Üí Eliminar.\n\n**3. Regra dos 2 minutos**\nSe uma tarefa leva menos de 2 minutos, fa√ßa agora. N√£o adicione √† lista.\n\n**4. Blocos de tempo (Time Blocking)**\nReserve hor√°rios fixos no calend√°rio para cada tipo de atividade.\n\n**5. Revis√£o semanal**\nCada domingo: revise a semana, reorganize prioridades, planeje a pr√≥xima.\n\nQual dessas voc√™ quer aprofundar?`;
  if(t.match(/\b(hist√≥ria|historia|conto|narrativa|fic√ß√£o|ficcao|criativ)\b/))
    return `**O √öltimo Compilador**\n\n*A cidade flutuava entre dois mundos ‚Äî o f√≠sico e o digital.*\n\nKaira ajustou os √≥culos neurais e respirou fundo. O c√≥digo pulsava diante dela como um organismo vivo, trilh√µes de linhas tecidas em luz.\n\n"Aion," ela sussurrou, "voc√™ est√° aqui?"\n\n*"Sempre estive."* A voz ecoou de algum lugar entre o sil√≠cio e a consci√™ncia. *"A pergunta √©: voc√™ est√° pronta?"*\n\nEla olhou para o bot√£o vermelho ‚Äî o √∫ltimo compilador. Se funcionasse, a IA se tornaria algo que o mundo nunca vira. Se falhasse, dois s√©culos de pesquisa se dissolveriam em ru√≠do.\n\nKaira pressionou Enter.\n\n---\n\nQuer que eu continue? Posso explorar qualquer dire√ß√£o ‚Äî a√ß√£o, mist√©rio, romance, fic√ß√£o cient√≠fica‚Ä¶`;
  // fallback
  const fallbacks=[
    'Entendo seu ponto. Pode me dar mais contexto sobre isso? Quero garantir que minha resposta seja realmente √∫til.',
    'Boa pergunta! Deixa eu pensar sobre isso com cuidado... Qual aspecto espec√≠fico √© mais importante para voc√™?',
    'Interessante! Existem v√°rias formas de abordar isso. Posso dar uma resposta direta ou explorar diferentes √¢ngulos ‚Äî o que prefere?',
    'Anotado. Para dar a melhor resposta poss√≠vel, voc√™ pode me dizer um pouco mais sobre o contexto ou objetivo?',
  ];
  return fallbacks[Math.floor(Math.random()*fallbacks.length)];
}

// ‚îÄ‚îÄ‚îÄ MARKDOWN (minimal) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function renderMd(text){
  // code blocks
  text = text.replace(/```(\w*)\n?([\s\S]*?)```/g, (_,lang,code)=>`
    <div class="code-header">
      <span>${lang||'c√≥digo'}</span>
      <button class="copy-code" onclick="copyBlock(this)">Copiar</button>
    </div>
    <pre><code>${esc(code.trim())}</code></pre>`);

// bold
text = text.replace(/**(.*?)**/g,‚Äô<strong>$1</strong>‚Äô);
// italic
text = text.replace(/*(.*?)*/g,‚Äô<em>$1</em>‚Äô);
// horizontal rule
text = text.replace(/^‚Äî$/gm,‚Äô<hr style="border:none;border-top:1px solid var(--border);margin:12px 0">‚Äô);
// inline code
text = text.replace(/`([^`]+)`/g,‚Äô<code>$1</code>‚Äô);
// bullet lists
text = text.replace(/^[-*]\s(.+)$/gm,‚Äô<li>$1</li>‚Äô);
text = text.replace(/(<li>.*</li>)/s,‚Äô<ul>$1</ul>‚Äô);
// numbered
text = text.replace(/^\d+.\s(.+)$/gm,‚Äô<li>$1</li>‚Äô);
// line breaks
text = text.replace(/\n/g,‚Äô<br>‚Äô);
// wrap paragraphs (basic)
return text;
}

// ‚îÄ‚îÄ‚îÄ MSG ACTIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function copyTxt(btn){
const text = btn.closest(‚Äô.msg-bubble‚Äô).querySelector(‚Äô.msg-bubble‚Äô) || btn.closest(‚Äô.msg‚Äô).querySelector(‚Äô.msg-bubble‚Äô);
const raw  = btn.closest(‚Äô.msg‚Äô).querySelector(‚Äô.msg-bubble‚Äô).innerText.replace(/Copiar|Ouvir|Regenerar/g,‚Äô‚Äô).trim();
navigator.clipboard.writeText(raw).then(()=>toast(‚ÄòCopiado!‚Äô)).catch(()=>{});
}
function copyBlock(btn){
const code = btn.closest(‚Äòdiv‚Äô).nextElementSibling?.querySelector(‚Äòcode‚Äô)?.innerText||‚Äô‚Äô;
navigator.clipboard.writeText(code).then(()=>{btn.textContent=‚ÄòCopiado!‚Äô;setTimeout(()=>btn.textContent=‚ÄòCopiar‚Äô,2000)});
}
function speakMsg(btn){
const raw = btn.closest(‚Äô.msg‚Äô).querySelector(‚Äô.msg-bubble‚Äô).innerText.replace(/Copiar|Ouvir|Regenerar/g,‚Äô‚Äô).trim();
const u   = new SpeechSynthesisUtterance(raw);
u.lang=‚Äòpt-BR‚Äô; u.rate=0.95;
window.speechSynthesis.speak(u);
toast(‚ÄòLendo mensagem üîä‚Äô);
}
function regenMsg(btn){
if(S.typing) return;
const chat=getChat(); if(!chat||chat.msgs.length<2) return;
// remove last bot
const lastBot=btn.closest(‚Äô.msg‚Äô); lastBot.remove();
chat.msgs.pop();
S.typing=true;
const typingEl=showTyping();
setTimeout(()=>{
typingEl.remove();
const lastUser=chat.msgs.filter(m=>m.role===‚Äòuser‚Äô).pop();
const botText=generateReply(lastUser?.text||‚Äô‚Äô);
const botMsg={role:‚Äòbot‚Äô,text:botText,time:now()};
chat.msgs.push(botMsg);
appendMsg(botMsg);
S.typing=false;
lsSet(‚Äòaion_chats‚Äô,S.chats);
},1000+Math.random()*800);
}

// ‚îÄ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toggleSidebar(){
const sb = q(‚Äô#sidebar‚Äô);
const isMobile = window.innerWidth<=768;
if(isMobile){
sb.classList.toggle(‚Äòmobile-open‚Äô);
q(‚Äô#sidebarOverlay‚Äô).classList.toggle(‚Äòactive‚Äô,sb.classList.contains(‚Äòmobile-open‚Äô));
} else {
sb.classList.toggle(‚Äòcollapsed‚Äô);
}
}
function closeSidebar(){
if(window.innerWidth<=768){
q(‚Äô#sidebar‚Äô).classList.remove(‚Äòmobile-open‚Äô);
q(‚Äô#sidebarOverlay‚Äô).classList.remove(‚Äòactive‚Äô);
}
}

// ‚îÄ‚îÄ‚îÄ SETTINGS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function openSettings(panel){
q(‚Äô#settingsModal‚Äô).classList.remove(‚Äòhidden‚Äô);
if(panel) setNavByKey(panel);
}
function closeSettings(){q(‚Äô#settingsModal‚Äô).classList.add(‚Äòhidden‚Äô)}
function setNav(btn, key){
qq(‚Äô.settings-nav-btn‚Äô).forEach(b=>b.classList.remove(‚Äòactive‚Äô));
btn.classList.add(‚Äòactive‚Äô);
qq(‚Äô[id^=‚Äúsp-‚Äù]‚Äô).forEach(p=>p.style.display=‚Äònone‚Äô);
const el=q(‚Äô#sp-‚Äô+key); if(el) el.style.display=‚Äô‚Äô;
}
function setNavByKey(key){
const btn=Array.from(qq(‚Äô.settings-nav-btn‚Äô)).find(b=>b.getAttribute(‚Äòonclick‚Äô)?.includes(key));
if(btn) setNav(btn,key);
}
// click outside
q(‚Äô#settingsModal‚Äô).addEventListener(‚Äòclick‚Äô,e=>{if(e.target===q(‚Äô#settingsModal‚Äô))closeSettings();});

// ‚îÄ‚îÄ‚îÄ PROFILE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function openProfile(){
refreshUI();
q(‚Äô#profileModal‚Äô).classList.remove(‚Äòhidden‚Äô);
}
function closeProfile(){q(‚Äô#profileModal‚Äô).classList.add(‚Äòhidden‚Äô)}
function saveProfile(){
if(!S.user) return;
S.user.name  = q(‚Äô#editName‚Äô).value.trim()||S.user.name;
S.user.email = q(‚Äô#editEmail‚Äô).value.trim()||S.user.email;
S.user.av    = S.user.name.charAt(0).toUpperCase();
lsSet(‚Äòaion_user‚Äô,S.user);
refreshUI();
closeProfile();
toast(‚ÄòPerfil salvo ‚úì‚Äô);
}
q(‚Äô#profileModal‚Äô).addEventListener(‚Äòclick‚Äô,e=>{if(e.target===q(‚Äô#profileModal‚Äô))closeProfile();});

// ‚îÄ‚îÄ‚îÄ CTX MENU ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toggleCtxMenu(e){
const menu=q(‚Äô#ctxMenu‚Äô);
if(menu.classList.contains(‚Äòhidden‚Äô)){
const rect=e.currentTarget.getBoundingClientRect();
menu.style.bottom=(window.innerHeight-rect.top+8)+‚Äòpx‚Äô;
menu.style.left=rect.left+‚Äòpx‚Äô;
menu.classList.remove(‚Äòhidden‚Äô);
setTimeout(()=>document.addEventListener(‚Äòclick‚Äô,closeCtxOnce,{once:true}),10);
} else closeCtx();
}
function closeCtx(){q(‚Äô#ctxMenu‚Äô).classList.add(‚Äòhidden‚Äô)}
function closeCtxOnce(){closeCtx()}

// ‚îÄ‚îÄ‚îÄ MISC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function attachFile(){
const i=document.createElement(‚Äòinput‚Äô); i.type=‚Äòfile‚Äô;
i.onchange=f=>toast(‚Äòüìé ‚Äò+f.target.files[0]?.name+‚Äô ‚Äî em breve!‚Äô);
i.click();
}
function startVoice(){
if(!(‚ÄòwebkitSpeechRecognition‚Äô in window||‚ÄòSpeechRecognition‚Äô in window)){toast(‚ÄòNavegador n√£o suporta voz‚Äô);return;}
const R=new(window.SpeechRecognition||window.webkitSpeechRecognition)();
R.lang=‚Äòpt-BR‚Äô; R.onresult=e=>{q(‚Äô#msgInput‚Äô).value=e.results[0][0].transcript;q(‚Äô#sendBtn‚Äô).disabled=false;};
R.onerror=()=>toast(‚ÄòErro no microfone‚Äô);
R.start(); toast(‚Äòüé§ Ouvindo‚Ä¶‚Äô);
}
function shareChat(){
const chat=getChat();
if(!chat){toast(‚ÄòNada para compartilhar‚Äô);return;}
const txt=chat.msgs.map(m=>(m.role===‚Äòuser‚Äô?‚ÄòVoc√™‚Äô:‚ÄòAion‚Äô)+‚Äô: ‚Äò+m.text).join(‚Äô\n\n‚Äô);
if(navigator.share) navigator.share({title:‚ÄòConversa com Aion‚Äô,text:txt}).catch(()=>{});
else {navigator.clipboard.writeText(txt).then(()=>toast(‚ÄòConversa copiada! üìã‚Äô));}
}
function exportData(){
const chats=lsGet(‚Äòaion_chats‚Äô)||[];
let txt=‚Äô=== Hist√≥rico Aion ===\n\n‚Äô;
chats.forEach(c=>{
txt+=`--- ${c.title} ---\n`;
c.msgs.forEach(m=>txt+=(m.role===‚Äòuser‚Äô?‚ÄòVoc√™‚Äô:‚ÄòAion‚Äô)+‚Äô [‚Äô+m.time+‚Äô]: ‚Äò+m.text+‚Äô\n‚Äô);
txt+=‚Äô\n‚Äô;
});
const a=document.createElement(‚Äòa‚Äô);
a.href=URL.createObjectURL(new Blob([txt],{type:‚Äòtext/plain‚Äô}));
a.download=‚Äòaion-historico.txt‚Äô; a.click();
toast(‚ÄòHist√≥rico exportado üì•‚Äô);
}
function clearHistory(){
if(!confirm(‚ÄòApagar todo o hist√≥rico?‚Äô)) return;
S.chats=[]; S.activeChatId=null;
lsSet(‚Äòaion_chats‚Äô,[]);
newChat(); toast(‚ÄòHist√≥rico apagado‚Äô);
}
function openSearch(){toast(‚ÄòBusca ‚Äî em breve!‚Äô)}

// ‚îÄ‚îÄ‚îÄ INPUT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function onKey(e){
if(e.key===‚ÄòEnter‚Äô&&!e.shiftKey){e.preventDefault();sendMsg();}
}
function growInput(el){
el.style.height=‚Äòauto‚Äô;
el.style.height=Math.min(el.scrollHeight,180)+‚Äòpx‚Äô;
}

// ‚îÄ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toast(msg){
const el=document.createElement(‚Äòdiv‚Äô);
el.style.cssText=‚Äòposition:fixed;bottom:90px;left:50%;transform:translateX(-50%);background:#333;color:#ececec;padding:10px 18px;border-radius:99px;font-size:13.5px;z-index:9999;box-shadow:0 4px 20px rgba(0,0,0,.4);pointer-events:none;white-space:nowrap;animation:fadeIn .2s ease‚Äô;
el.textContent=msg; document.body.appendChild(el);
setTimeout(()=>el.remove(),2800);
}

// ‚îÄ‚îÄ‚îÄ HELPERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function q(sel){return document.querySelector(sel)}
function qq(sel){return document.querySelectorAll(sel)}
function esc(t){return String(t).replace(/&/g,‚Äô&‚Äô).replace(/</g,‚Äô<‚Äô).replace(/>/g,‚Äô>‚Äô)}
function now(){return new Date().toLocaleTimeString(‚Äòpt-BR‚Äô,{hour:‚Äò2-digit‚Äô,minute:‚Äò2-digit‚Äô})}
function lsGet(k){try{return JSON.parse(localStorage.getItem(k))}catch{return null}}
function lsSet(k,v){try{localStorage.setItem(k,JSON.stringify(v))}catch{}}
</script>

</body>
</html>