<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <!-- T√≠tulo e Descri√ß√£o -->
  <title>Sion - Seu Companheiro AmplaAI</title>
  <meta name="description" content="Sion √© seu companheiro de explora√ß√£o e solu√ß√µes, desenvolvido pela AmplaAI. Converse naturalmente sobre tecnologia, criatividade e inova√ß√£o.">
  <meta name="keywords" content="Sion, AmplaAI, chatbot, assistente, YumeRoll, tecnologia">
  <meta name="author" content="AmplaAI">

  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#6366f1">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Sion">
  
  <!-- TWA Meta Tags -->
  <meta name="google-play-app" content="app-id=com.amplaai.sion">
  <meta name="apple-itunes-app" content="app-id=com.amplaai.sion">

  <!-- Manifest -->
  <link rel="manifest" id="app-manifest" crossorigin="use-credentials">

  <!-- √çcones -->
  <link rel="icon" type="image/png" href="https://i.imgur.com/DtMv80V.png">
  <link rel="apple-touch-icon" href="https://i.imgur.com/DtMv80V.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://i.imgur.com/DtMv80V.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://i.imgur.com/DtMv80V.png">
  <link rel="apple-touch-icon" sizes="167x167" href="https://i.imgur.com/DtMv80V.png">
  
  <!-- Splash Screen para iOS -->
  <link rel="apple-touch-startup-image" href="https://i.imgur.com/DtMv80V.png">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://orpheostudio.com.br">
  <meta property="og:title" content="Sion - Seu Companheiro AmplaAI">
  <meta property="og:description" content="Converse naturalmente sobre tecnologia, criatividade e inova√ß√£o com o Sion.">
  <meta property="og:image" content="https://i.imgur.com/DtMv80V.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://orpheostudio.com.br">
  <meta property="twitter:title" content="Sion - Seu Companheiro AmplaAI">
  <meta property="twitter:description" content="Converse naturalmente sobre tecnologia, criatividade e inova√ß√£o com o Sion.">
  <meta property="twitter:image" content="https://i.imgur.com/DtMv80V.png">

  <!-- Microsoft Clarity -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "tlya8thx8r");
  </script>

  <!-- Google AdMob/AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5941203056187445"
     crossorigin="anonymous"></script>

  <!-- Preconnect para performance -->
  <link rel="preconnect" href="https://api.mistral.ai">
  <link rel="preconnect" href="https://www.clarity.ms">
  <link rel="preconnect" href="https://pagead2.googlesyndication.com">

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --primary-light: #818cf8;
      --secondary: #f59e0b;
      --accent: #10b981;
      --background: #0f172a;
      --surface: #1e293b;
      --surface-light: #334155;
      --text: #f8fafc;
      --text-secondary: #cbd5e1;
      --text-muted: #94a3b8;
      --border: #334155;
      --error: #ef4444;
      --success: #10b981;
      --warning: #f59e0b;
      --info: #3b82f6;
      --gradient: linear-gradient(135deg, #6366f1, #8b5cf6);
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      height: 100%;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background-color: var(--background);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      height: 100%;
    }

    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--background);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    .loading-logo {
      width: 80px;
      height: 80px;
      margin-bottom: 20px;
      border-radius: 20px;
      animation: pulse 2s infinite;
    }

    .loading-text {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 20px;
      background: var(--gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(99, 102, 241, 0.2);
      border-top: 4px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* Status Bar */
    .status-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1001;
      font-size: 12px;
      color: var(--text-muted);
      padding: 0 10px;
    }

    .status-time {
      flex: 1;
      text-align: left;
    }

    .status-battery {
      flex: 1;
      text-align: right;
    }

    /* Screens */
    .screen {
      display: none;
      position: fixed;
      top: 30px;
      left: 0;
      width: 100%;
      height: calc(100% - 30px);
      overflow-y: auto;
      background: var(--background);
    }

    .screen.active {
      display: block;
    }

    /* Welcome Screen */
    .welcome-container {
      min-height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      text-align: center;
      background: radial-gradient(circle at 50% 0%, rgba(99, 102, 241, 0.1), transparent 50%);
    }

    .welcome-logo {
      width: 120px;
      height: 120px;
      margin-bottom: 20px;
      border-radius: 24px;
      box-shadow: var(--shadow-lg);
    }

    .welcome-title {
      font-size: 48px;
      font-weight: 800;
      margin-bottom: 10px;
      background: var(--gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .welcome-subtitle {
      font-size: 18px;
      color: var(--text-secondary);
      margin-bottom: 5px;
    }

    .welcome-author {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 40px;
    }

    .welcome-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
      max-width: 300px;
      margin-bottom: 40px;
    }

    .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 20px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      outline: none;
    }

    .btn-primary {
      background: var(--gradient);
      color: white;
      box-shadow: var(--shadow);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .btn-secondary {
      background: var(--surface);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: var(--surface-light);
    }

    .btn-full {
      width: 100%;
    }

    .welcome-footer {
      margin-top: auto;
      padding-top: 30px;
      color: var(--text-muted);
      font-size: 14px;
    }

    .welcome-links {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }

    .welcome-links a {
      color: var(--primary-light);
      text-decoration: none;
    }

    .welcome-links a:hover {
      text-decoration: underline;
    }

    /* Chat Screen */
    .chat-header {
      position: sticky;
      top: 0;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
      z-index: 100;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 20px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .header-logo {
      width: 40px;
      height: 40px;
      border-radius: 10px;
    }

    .header-info h1 {
      font-size: 18px;
      font-weight: 700;
    }

    .header-info p {
      font-size: 12px;
      color: var(--text-muted);
    }

    .menu-btn {
      background: none;
      border: none;
      color: var(--text);
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .menu-btn:hover {
      background: var(--surface);
    }

    .menu-dropdown {
      position: absolute;
      top: 100%;
      right: 20px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 8px;
      box-shadow: var(--shadow-lg);
      display: none;
      z-index: 101;
      min-width: 180px;
    }

    .menu-dropdown.active {
      display: block;
    }

    .menu-item {
      display: flex;
      align-items: center;
      gap: 10px;
      width: 100%;
      padding: 10px 12px;
      background: none;
      border: none;
      color: var(--text);
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s ease;
    }

    .menu-item:hover {
      background: var(--surface-light);
    }

    .messages-container {
      padding: 20px;
      padding-bottom: 100px;
      max-height: calc(100vh - 170px);
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    .message {
      display: flex;
      margin-bottom: 20px;
      animation: messageSlideIn 0.3s ease;
    }

    .message.user {
      justify-content: flex-end;
    }

    .message.assistant {
      justify-content: flex-start;
    }

    .message-content {
      max-width: 80%;
      padding: 14px 18px;
      border-radius: 18px;
      position: relative;
      box-shadow: var(--shadow);
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    .message.user .message-content {
      background: var(--gradient);
      color: white;
      border-bottom-right-radius: 4px;
    }

    .message.assistant .message-content {
      background: var(--surface);
      color: var(--text);
      border-bottom-left-radius: 4px;
    }

    .message-time {
      display: block;
      font-size: 11px;
      margin-top: 5px;
      opacity: 0.7;
      text-align: right;
    }

    .input-container {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 15px 20px;
      background: var(--background);
      border-top: 1px solid var(--border);
      display: flex;
      align-items: flex-end;
      gap: 10px;
      z-index: 99;
    }

    #message-input {
      flex: 1;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 12px 18px;
      color: var(--text);
      font-family: inherit;
      font-size: 16px;
      resize: none;
      max-height: 120px;
      outline: none;
      transition: border-color 0.2s ease;
      -webkit-appearance: none;
    }

    #message-input:focus {
      border-color: var(--primary);
    }

    .send-btn {
      background: var(--gradient);
      color: white;
      border: none;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .send-btn:hover {
      transform: scale(1.05);
    }

    .send-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* About Screen */
    .about-container {
      min-height: 100%;
      padding: 20px;
      padding-bottom: 100px;
    }

    .back-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      background: none;
      border: none;
      color: var(--text);
      cursor: pointer;
      padding: 10px 0;
      margin-bottom: 20px;
      font-size: 16px;
    }

    .back-btn:hover {
      color: var(--primary-light);
    }

    .about-card {
      background: var(--surface);
      border-radius: 20px;
      padding: 30px;
      box-shadow: var(--shadow-lg);
      margin-bottom: 30px;
    }

    .about-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .about-logo {
      width: 80px;
      height: 80px;
      border-radius: 16px;
      margin-bottom: 15px;
    }

    .about-header h1 {
      font-size: 28px;
      margin-bottom: 5px;
    }

    .about-version {
      color: var(--text-muted);
      font-size: 14px;
    }

    .about-section {
      margin-bottom: 30px;
    }

    .about-section h2 {
      font-size: 20px;
      margin-bottom: 15px;
      color: var(--primary-light);
    }

    .about-section p {
      margin-bottom: 15px;
      color: var(--text-secondary);
    }

    .about-section ul {
      margin-left: 20px;
      margin-bottom: 15px;
    }

    .about-section li {
      margin-bottom: 8px;
      color: var(--text-secondary);
    }

    .link-primary {
      color: var(--primary-light);
      text-decoration: none;
      font-weight: 600;
      display: inline-block;
      margin-top: 10px;
    }

    .link-primary:hover {
      text-decoration: underline;
    }

    .social-links {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .social-links div p {
      margin-bottom: 5px;
    }

    .social-links a {
      display: block;
      color: var(--primary-light);
      text-decoration: none;
      margin-bottom: 5px;
    }

    .social-links a:hover {
      text-decoration: underline;
    }

    .doc-links {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .doc-link {
      display: block;
      padding: 12px 16px;
      background: var(--background);
      border-radius: 10px;
      color: var(--text);
      text-decoration: none;
      transition: background 0.2s ease;
    }

    .doc-link:hover {
      background: var(--surface-light);
    }

    .ad-container {
      margin-top: 20px;
      display: flex;
      justify-content: center;
    }

    /* Typing Indicator */
    .typing-indicator {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .typing-indicator.active {
      opacity: 1;
    }

    .typing-dots {
      display: flex;
      gap: 4px;
      margin-left: 10px;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--text-muted);
      animation: typingPulse 1.5s infinite ease-in-out;
    }

    .typing-dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    /* Quick Replies */
    .quick-replies {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .quick-reply {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 14px;
      color: var(--text);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .quick-reply:hover {
      background: var(--surface-light);
      transform: translateY(-2px);
    }

    /* Connection Status */
    .connection-status {
      position: fixed;
      top: 40px;
      right: 20px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 98;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .connection-status.active {
      opacity: 1;
    }

    .connection-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--error);
    }

    .connection-dot.connected {
      background: var(--success);
    }

    /* Offline Indicator */
    .offline-indicator {
      position: fixed;
      bottom: 80px;
      left: 20px;
      right: 20px;
      background: var(--warning);
      color: var(--background);
      padding: 10px 15px;
      border-radius: 12px;
      font-size: 14px;
      text-align: center;
      z-index: 100;
      display: none;
      animation: slideUp 0.3s ease;
    }

    .offline-indicator.active {
      display: block;
    }

    /* Install Button */
    .install-btn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: var(--gradient);
      color: white;
      border: none;
      border-radius: 50px;
      padding: 12px 20px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      z-index: 1000;
      display: none;
      transition: all 0.3s ease;
    }

    .install-btn:hover {
      transform: translateY(-2px);
    }

    /* Donation Banner */
    #sion-donation-banner {
      position: fixed;
      bottom: 20px;
      right: 20px;
      max-width: 350px;
      background: rgba(10, 15, 30, 0.95);
      border: 1px solid rgba(0, 200, 255, 0.3);
      border-radius: 16px;
      padding: 16px 18px;
      color: #E6F6FF;
      font-family: 'Inter', sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      backdrop-filter: blur(8px);
      z-index: 9999;
      animation: sionFadeIn 0.6s ease forwards;
      display: none;
    }

    .sion-banner-content {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .sion-banner-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .sion-donate-btn {
      background: #00C8FF;
      color: #0A0F1E;
      padding: 6px 14px;
      border-radius: 8px;
      font-weight: bold;
      text-decoration: none;
      transition: all 0.2s ease;
    }

    .sion-donate-btn:hover {
      background: #00A8DD;
    }

    #sion-banner-close {
      background: transparent;
      border: none;
      color: #9BC9FF;
      font-size: 1.2rem;
      cursor: pointer;
      transition: color 0.2s ease;
    }

    #sion-banner-close:hover {
      color: #fff;
    }

    /* Animations */
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes messageSlideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes typingPulse {
      0%, 60%, 100% {
        transform: scale(0.8);
        opacity: 0.5;
      }
      30% {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes sionFadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .welcome-title {
        font-size: 36px;
      }
      
      .message-content {
        max-width: 90%;
      }
      
      .about-card {
        padding: 20px;
      }
      
      #sion-donation-banner {
        right: 10px;
        left: 10px;
        max-width: none;
      }
    }

    @media (max-width: 480px) {
      .welcome-title {
        font-size: 28px;
      }
      
      .welcome-logo {
        width: 100px;
        height: 100px;
      }
      
      .header-content {
        padding: 12px 15px;
      }
      
      .messages-container {
        padding: 15px;
        padding-bottom: 100px;
      }
      
      .input-container {
        padding: 12px 15px;
      }
    }

    /* Safe Areas for Notch */
    @supports (padding: max(0px)) {
      .screen {
        padding-left: max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
        padding-bottom: max(0px, env(safe-area-inset-bottom));
      }
      
      .input-container {
        padding-bottom: max(15px, env(safe-area-inset-bottom));
      }
    }
  </style>
</head>
<body>
  <!-- Status Bar -->
  <div class="status-bar" id="status-bar">
    <div class="status-time" id="current-time">00:00</div>
    <div class="status-battery" id="battery-status">100%</div>
  </div>

  <!-- Loading Screen -->
  <div class="loading-screen" id="loading-screen">
    <img src="https://i.imgur.com/DtMv80V.png" alt="Sion Logo" class="loading-logo">
    <div class="loading-text">Sion</div>
    <div class="loading-spinner"></div>
  </div>

  <!-- Connection Status -->
  <div class="connection-status" id="connection-status">
    <div class="connection-dot" id="connection-dot"></div>
    <span id="connection-text">Conectando...</span>
  </div>

  <!-- Offline Indicator -->
  <div class="offline-indicator" id="offline-indicator">
    ‚ö†Ô∏è Voc√™ est√° offline. Algumas funcionalidades podem estar limitadas.
  </div>

  <!-- Welcome Screen -->
  <div id="welcome-screen" class="screen active">
    <div class="welcome-container">
      <img src="https://i.imgur.com/DtMv80V.png" alt="Sion Logo" class="welcome-logo">
      <h1 class="welcome-title">Sion</h1>
      <p class="welcome-subtitle">Seu companheiro de explora√ß√£o e solu√ß√µes</p>
      <p class="welcome-author">Desenvolvido por AmplaAI</p>

      <div class="welcome-buttons">
        <button onclick="showScreen('chat')" class="btn btn-primary">
          <i data-lucide="message-circle"></i>
          <span>Come√ßar Conversa</span>
        </button>

        <button onclick="showScreen('about')" class="btn btn-secondary">
          <i data-lucide="info"></i>
          <span>Sobre o Sion</span>
        </button>
      </div>

      <div class="welcome-footer">
        <p>Ao continuar, voc√™ concorda com nossos</p>
        <div class="welcome-links">
          <a href="https://termos.orpheostudio.com.br" target="_blank" rel="noopener noreferrer">Termos de Uso</a>
          <span>‚Ä¢</span>
          <a href="https://politicas.orpheostudio.com.br" target="_blank" rel="noopener noreferrer">Pol√≠ticas</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat Screen -->
  <div id="chat-screen" class="screen">
    <!-- Header -->
    <div class="chat-header">
      <div class="header-content">
        <div class="header-left">
          <img src="https://i.imgur.com/DtMv80V.png" alt="Sion" class="header-logo">
          <div class="header-info">
            <h1>Sion</h1>
            <p>by AmplaAI</p>
          </div>
        </div>
        <button class="menu-btn" onclick="toggleMenu()">
          <i data-lucide="menu" id="menu-icon"></i>
        </button>
      </div>

      <!-- Menu Dropdown -->
      <div id="menu-dropdown" class="menu-dropdown">
        <button onclick="showScreen('about')" class="menu-item">
          <i data-lucide="info"></i>
          <span>Sobre o Sion</span>
        </button>
        <button onclick="exportChat()" class="menu-item">
          <i data-lucide="download"></i>
          <span>Exportar Chat</span>
        </button>
        <button onclick="clearChat()" class="menu-item">
          <i data-lucide="trash-2"></i>
          <span>Limpar Chat</span>
        </button>
        <button onclick="shareApp()" class="menu-item">
          <i data-lucide="share-2"></i>
          <span>Compartilhar App</span>
        </button>
        <button onclick="showScreen('welcome')" class="menu-item">
          <i data-lucide="home"></i>
          <span>Tela Inicial</span>
        </button>
      </div>
    </div>

    <!-- Messages Area -->
    <div class="messages-container" id="messages-container">
      <div class="message assistant">
        <div class="message-content">
          <p>Ol√°! Sou o Sion, seu companheiro de explora√ß√£o e solu√ß√µes desenvolvido pela AmplaAI. Estou aqui para ajudar voc√™ com tecnologia, criatividade e inova√ß√£o. Como posso te ajudar hoje? üòä</p>
          <span class="message-time"></span>
        </div>
      </div>
      
      <!-- Quick Replies -->
      <div class="quick-replies" id="quick-replies">
        <button class="quick-reply" onclick="quickReply('Conte-me sobre a AmplaAI')">Sobre a AmplaAI</button>
        <button class="quick-reply" onclick="quickReply('Quais s√£o seus recursos?')">Recursos</button>
        <button class="quick-reply" onclick="quickReply('Como posso usar o YumeRoll?')">YumeRoll</button>
        <button class="quick-reply" onclick="quickReply('O que √© a Escola de Autores?')">Escola de Autores</button>
      </div>
    </div>

    <!-- Typing Indicator -->
    <div class="typing-indicator" id="typing-indicator">
      <div class="message assistant">
        <div class="message-content">
          <p>Sion est√° digitando</p>
          <div class="typing-dots">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Input Area -->
    <div class="input-container">
      <textarea 
        id="message-input" 
        placeholder="Digite sua mensagem..." 
        rows="1"
        onkeydown="handleKeyDown(event)"
        oninput="autoResize(this)"
      ></textarea>
      <button id="send-btn" onclick="sendMessage()" class="send-btn">
        <i data-lucide="send"></i>
      </button>
    </div>
  </div>

  <!-- About Screen -->
  <div id="about-screen" class="screen">
    <div class="about-container">
      <button onclick="showScreen('welcome')" class="back-btn">
        <i data-lucide="home"></i>
        <span>Voltar</span>
      </button>

      <div class="about-card">
        <div class="about-header">
          <img src="https://i.imgur.com/DtMv80V.png" alt="Sion Logo" class="about-logo">
          <h1>Sobre o Sion</h1>
          <p class="about-version">v2.1 | Mistral AI Edition</p>
        </div>

        <div class="about-content">
          <section class="about-section">
            <h2>ü§ñ Quem Sou Eu</h2>
            <p>Sou o Sion, seu companheiro virtual desenvolvido pela AmplaAI. Utilizo intelig√™ncia artificial OrionAI para oferecer conversas naturais e √∫teis sobre tecnologia, criatividade, inova√ß√£o e muito mais!</p>
          </section>

          <section class="about-section">
            <h2>üöÄ Desenvolvido por AmplaAI</h2>
            <p>A AmplaAI √© um est√∫dio de inova√ß√£o que desenvolve projetos incr√≠veis:</p>
            <ul>
              <li><strong>Sena</strong> - Solu√ß√µes inteligentes para automa√ß√£o</li>
              <li><strong>YumeRoll Animes</strong> - Plataforma premium de animes</li>
              <li><strong>Escola de Autores</strong> - Desenvolvimento criativo e liter√°rio</li>
            </ul>
            <a href="https://orpheostudio.com.br" target="_blank" rel="noopener noreferrer" class="link-primary">
              Visite o AmplaAI Studio ‚Üí
            </a>
          </section>

          <section class="about-section">
            <h2>‚ö° Tecnologia</h2>
            <p>Este aplicativo utiliza:</p>
            <ul>
              <li><strong>Orion AI</strong> - Modelo de linguagem avan√ßado</li>
              <li><strong>PWA (Progressive Web App)</strong> - Instal√°vel como app nativo</li>
              <li><strong>TWA (Trusted Web Activity)</strong> - Para Google Play Store</li>
              <li><strong>Service Worker</strong> - Funciona offline parcialmente</li>
              <li><strong>Local Storage</strong> - Salva suas conversas localmente</li>
            </ul>
          </section>

          <section class="about-section">
            <h2>üì± Recursos do App</h2>
            <ul>
              <li>Conversa√ß√£o natural com IA</li>
              <li>Hist√≥rico de conversas salvo</li>
              <li>Exporta√ß√£o de chats</li>
              <li>Interface responsiva</li>
              <li>Modo offline parcial</li>
              <li>Instala√ß√£o como app nativo</li>
              <li>Notifica√ß√µes push (em breve)</li>
            </ul>
          </section>

          <section class="about-section">
            <h2>üåê Redes Sociais</h2>
            <div class="social-links">
              <div>
                <p><strong>AmplaAI:</strong></p>
                <a href="https://instagram.com/ampla.ai" target="_blank" rel="noopener noreferrer">@ampla.ai no Instagram</a>
              </div>
              <div>
                <p><strong>YumeRoll:</strong></p>
                <a href="https://instagram.com/yumerolloficial" target="_blank" rel="noopener noreferrer">@yumerolloficial (Instagram)</a>
                <a href="https://tiktok.com/@yumerollanime" target="_blank" rel="noopener noreferrer">@yumerollanimes (TikTok)</a>
              </div>
            </div>
          </section>

          <section class="about-section">
            <h2>üìÑ Documenta√ß√£o</h2>
            <div class="doc-links">
              <a href="https://termos.orpheostudio.com.br" target="_blank" rel="noopener noreferrer" class="doc-link">üìù Termos de Uso</a>
              <a href="https://politicas.orpheostudio.com.br" target="_blank" rel="noopener noreferrer" class="doc-link">üîí Pol√≠ticas de Privacidade</a>
              <a href="www.cici.net.br" target="_blank" rel="noopener noreferrer" class="doc-link">üìö Sena</a>
            </div>
          </section>
        </div>

        <div style="margin-top: 30px; text-align: center;">
          <button onclick="showScreen('chat')" class="btn btn-primary btn-full" style="margin-bottom: 15px;">
            <i data-lucide="message-circle"></i>
            <span>Come√ßar a Conversar</span>
          </button>
          
          <button onclick="checkForUpdates()" class="btn btn-secondary btn-full">
            <i data-lucide="refresh-cw"></i>
            <span>Verificar Atualiza√ß√µes</span>
          </button>
        </div>
      </div>

      <!-- AdMob Banner -->
      <div class="ad-container">
        <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-5941203056187445"
          data-ad-slot="f08c47fec0942fa0"
          data-ad-format="auto"
          data-full-width-responsive="true">
        </ins>
      </div>
    </div>
  </div>

  <!-- Donate Reminder -->
  <div id="sion-donation-banner">
    <div class="sion-banner-content">
      <p>ü§ñ <strong>Sion:</strong> Ajude a manter este servi√ßo online! Doa√ß√µes ajudam com os custos da API da Mistral AI. üíô</p>
      <div class="sion-banner-actions">
        <a href="https://nubank.com.br/cobrar/ftet6/690dfa92-b7c5-4679-83ff-6d64e4b35c83" target="_blank" class="sion-donate-btn">Apoiar Sion</a>
        <button id="sion-banner-close" aria-label="Fechar">‚úï</button>
      </div>
    </div>
  </div>

  <!-- Install Button -->
  <button id="install-button" class="install-btn">
    üì≤ Instalar App
  </button>

  <script>
    // =============== CONFIGURA√á√ïES DA API ===============
    const API_CONFIG = {
      // Chave da API Mistral (configura√ß√£o interna)
      MISTRAL_API_KEY: 'NFuAj8PYUPcaf6tA1BjbyXuIeSjSA4sW', // ‚Üê COLOCAR CHAVE REAL AQUI
      MISTRAL_API_URL: 'https://api.mistral.ai/v1/chat/completions',
      MODEL: 'mistral-tiny', // mistral-tiny, mistral-small, mistral-medium
      MAX_TOKENS: 1000,
      TEMPERATURE: 0.7
    };

    // =============== VARI√ÅVEIS GLOBAIS ===============
    let deferredPrompt;
    let chatHistory = [];
    let isOnline = navigator.onLine;
    let isTyping = false;
    let serviceWorkerRegistered = false;

    // =============== INICIALIZA√á√ÉO ===============
    document.addEventListener('DOMContentLoaded', async () => {
      console.log('üöÄ Iniciando Sion v2.1...');
      
      // Inicializar √≠cones
      lucide.createIcons();
      
      // Configurar manifest din√¢mico
      setupDynamicManifest();
      
      // Configurar Service Worker para PWA
      await setupServiceWorker();
      
      // Configurar status online/offline
      setupNetworkMonitoring();
      
      // Configurar atualiza√ß√£o de tempo
      updateTime();
      setInterval(updateTime, 60000);
      
      // Configurar bateria
      setupBatteryMonitoring();
      
      // Configurar eventos
      setupEventListeners();
      
      // Inicializar chat
      initializeChat();
      
      // Configurar PWA
      setupPWA();
      
      // Mostrar loading por 2 segundos
      setTimeout(() => {
        document.getElementById('loading-screen').style.opacity = '0';
        setTimeout(() => {
          document.getElementById('loading-screen').style.display = 'none';
          checkConnection();
        }, 500);
      }, 2000);
      
      // Mostrar banner de doa√ß√£o ap√≥s 30 segundos
      setTimeout(() => {
        const banner = document.getElementById('sion-donation-banner');
        if (Math.random() > 0.7) { // 30% chance de mostrar
          banner.style.display = 'block';
        }
      }, 30000);
    });

    // =============== SERVICE WORKER (PWA) ===============
    async function setupServiceWorker() {
      if ('serviceWorker' in navigator) {
        try {
          const registration = await navigator.serviceWorker.register('/sw.js');
          console.log('‚úÖ Service Worker registrado:', registration);
          serviceWorkerRegistered = true;
          
          // Verificar atualiza√ß√µes
          registration.addEventListener('updatefound', () => {
            const newWorker = registration.installing;
            newWorker.addEventListener('statechange', () => {
              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                showUpdateNotification();
              }
            });
          });
        } catch (error) {
          console.error('‚ùå Erro ao registrar Service Worker:', error);
        }
      }
    }

    // =============== MANIFEST DIN√ÇMICO ===============
    function setupDynamicManifest() {
      const manifest = {
        name: 'Sion - AmplaAI',
        short_name: 'Sion',
        description: 'Seu companheiro de explora√ß√£o e solu√ß√µes',
        start_url: '/',
        display: 'standalone',
        orientation: 'portrait',
        background_color: '#0f172a',
        theme_color: '#6366f1',
        icons: [
          {
            src: 'https://i.imgur.com/DtMv80V.png',
            sizes: '192x192',
            type: 'image/png'
          },
          {
            src: 'https://i.imgur.com/DtMv80V.png',
            sizes: '512x512',
            type: 'image/png'
          }
        ],
        shortcuts: [
          {
            name: 'Nova Conversa',
            short_name: 'Chat',
            description: 'Comece uma nova conversa com o Sion',
            url: '/#chat'
          }
        ],
        categories: ['productivity', 'utilities'],
        screenshots: [
          {
            src: 'https://i.imgur.com/DtMv80V.png',
            sizes: '1080x1920',
            type: 'image/png',
            form_factor: 'narrow'
          }
        ]
      };

      const manifestString = JSON.stringify(manifest);
      const manifestBlob = new Blob([manifestString], { type: 'application/json' });
      const manifestURL = URL.createObjectURL(manifestBlob);
      document.getElementById('app-manifest').href = manifestURL;
    }

    // =============== MONITORAMENTO DE REDE ===============
    function setupNetworkMonitoring() {
      window.addEventListener('online', () => {
        isOnline = true;
        document.getElementById('offline-indicator').classList.remove('active');
        updateConnectionStatus(true);
      });

      window.addEventListener('offline', () => {
        isOnline = false;
        document.getElementById('offline-indicator').classList.add('active');
        updateConnectionStatus(false);
      });

      updateConnectionStatus(isOnline);
    }

    // =============== CONFIGURA√á√ÉO DO CHAT ===============
    function initializeChat() {
      // Adicionar hora √† mensagem de boas-vindas
      const welcomeMessage = document.querySelector('.message.assistant .message-time');
      if (welcomeMessage) {
        welcomeMessage.textContent = getCurrentTime();
      }
      
      // Carregar hist√≥rico salvo
      const savedChat = localStorage.getItem('sionChatHistory');
      if (savedChat) {
        try {
          chatHistory = JSON.parse(savedChat);
          if (chatHistory.length > 0) {
            const messagesContainer = document.getElementById('messages-container');
            messagesContainer.innerHTML = '';
            
            chatHistory.forEach(msg => {
              addMessageToChat(msg.text, msg.sender, false);
            });
            
            // Adicionar quick replies se n√£o houver mensagens recentes
            if (chatHistory.length > 0) {
              addQuickReplies();
            }
          }
        } catch (e) {
          console.error('Erro ao carregar hist√≥rico:', e);
        }
      }
    }

    // =============== NAVEGA√á√ÉO ===============
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
      });
      document.getElementById(`${screenId}-screen`).classList.add('active');
      document.getElementById('menu-dropdown').classList.remove('active');
      window.scrollTo(0, 0);
      
      if (screenId === 'chat') {
        setTimeout(() => {
          document.getElementById('message-input').focus();
        }, 300);
      }
    }

    function toggleMenu() {
      const menu = document.getElementById('menu-dropdown');
      menu.classList.toggle('active');
    }

    // =============== ENVIO DE MENSAGENS ===============
    async function sendMessage() {
      const messageInput = document.getElementById('message-input');
      const message = messageInput.value.trim();
      
      if (!message) return;
      
      // Desabilitar bot√£o durante processamento
      const sendBtn = document.getElementById('send-btn');
      sendBtn.disabled = true;
      
      // Adicionar mensagem do usu√°rio
      addMessageToChat(message, 'user');
      
      // Limpar input
      messageInput.value = '';
      messageInput.style.height = 'auto';
      
      // Verificar conex√£o
      if (!isOnline) {
        addMessageToChat(
          "‚ö†Ô∏è Voc√™ est√° offline. Por favor, conecte-se √† internet para eu poder responder.",
          'assistant'
        );
        sendBtn.disabled = false;
        return;
      }
      
      // Mostrar indicador de digita√ß√£o
      showTypingIndicator();
      
      try {
        // Chamar API da Mistral
        const response = await callMistralAPI(message);
        hideTypingIndicator();
        addMessageToChat(response, 'assistant');
      } catch (error) {
        hideTypingIndicator();
        console.error('Erro na API:', error);
        
        let errorMessage = "Desculpe, tive um problema ao processar sua mensagem. ";
        
        if (error.message.includes('API key')) {
          errorMessage += "Erro de configura√ß√£o da API.";
        } else if (error.message.includes('network')) {
          errorMessage += "Problema de conex√£o. Verifique sua internet.";
        } else if (error.message.includes('quota')) {
          errorMessage += "Limite de uso excedido. Tente novamente mais tarde.";
        } else {
          errorMessage += "Tente novamente em alguns instantes.";
        }
        
        addMessageToChat(errorMessage, 'assistant');
      } finally {
        sendBtn.disabled = false;
      }
    }

    // =============== API MISTRAL ===============
    async function callMistralAPI(userMessage) {
      // Verificar se a chave da API est√° configurada
      if (API_CONFIG.MISTRAL_API_KEY === 'INSERT_YOUR_MISTRAL_API_KEY_HERE') {
        throw new Error('API key n√£o configurada');
      }
      
      // Preparar hist√≥rico para a API
      const messagesForAPI = [
        {
          role: 'system',
          content: 'Voc√™ √© Sion, um assistente amig√°vel e √∫til desenvolvido pela AmplaAI. Voc√™ ajuda com tecnologia, criatividade, inova√ß√£o e responde de forma natural e envolvente. Use emojis ocasionalmente.'
        },
        ...chatHistory
          .slice(-10) // √öltimas 10 mensagens para contexto
          .map(msg => ({
            role: msg.sender === 'user' ? 'user' : 'assistant',
            content: msg.text
          })),
        { role: 'user', content: userMessage }
      ];
      
      const requestBody = {
        model: API_CONFIG.MODEL,
        messages: messagesForAPI,
        max_tokens: API_CONFIG.MAX_TOKENS,
        temperature: API_CONFIG.TEMPERATURE,
        stream: false
      };
      
      const response = await fetch(API_CONFIG.MISTRAL_API_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${API_CONFIG.MISTRAL_API_KEY}`
        },
        body: JSON.stringify(requestBody)
      });
      
      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        throw new Error(`API Error ${response.status}: ${errorData.error?.message || response.statusText}`);
      }
      
      const data = await response.json();
      
      if (!data.choices || !data.choices[0] || !data.choices[0].message) {
        throw new Error('Resposta inv√°lida da API');
      }
      
      return data.choices[0].message.content;
    }

    // =============== FUN√á√ïES AUXILIARES DO CHAT ===============
    function addMessageToChat(text, sender, saveToHistory = true) {
      const messagesContainer = document.getElementById('messages-container');
      const messageElement = document.createElement('div');
      messageElement.className = `message ${sender}`;
      
      const messageContent = document.createElement('div');
      messageContent.className = 'message-content';
      
      const messageText = document.createElement('div');
      messageText.innerHTML = formatMessage(text);
      
      const messageTime = document.createElement('span');
      messageTime.className = 'message-time';
      messageTime.textContent = getCurrentTime();
      
      messageContent.appendChild(messageText);
      messageContent.appendChild(messageTime);
      messageElement.appendChild(messageContent);
      messagesContainer.appendChild(messageElement);
      
      // Rolar para √∫ltima mensagem
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
      
      // Salvar no hist√≥rico
      if (saveToHistory) {
        chatHistory.push({
          text: text,
          sender: sender,
          time: getCurrentTime()
        });
        
        // Manter apenas √∫ltimas 100 mensagens
        if (chatHistory.length > 100) {
          chatHistory = chatHistory.slice(-100);
        }
        
        localStorage.setItem('sionChatHistory', JSON.stringify(chatHistory));
      }
      
      // Remover quick replies ap√≥s intera√ß√£o
      if (sender === 'user') {
        document.getElementById('quick-replies').innerHTML = '';
      }
    }

    function addQuickReplies() {
      const quickReplies = [
        'Conte-me sobre a AmplaAI',
        'Quais s√£o seus recursos?',
        'Como posso usar o YumeRoll?',
        'O que √© a Escola de Autores?',
        'Ajude-me com um projeto criativo',
        'Fale sobre tecnologia'
      ];
      
      const container = document.getElementById('quick-replies');
      if (container && container.children.length === 0) {
        quickReplies.slice(0, 4).forEach(text => {
          const button = document.createElement('button');
          button.className = 'quick-reply';
          button.textContent = text;
          button.onclick = () => quickReply(text);
          container.appendChild(button);
        });
      }
    }

    function quickReply(text) {
      document.getElementById('message-input').value = text;
      sendMessage();
    }

    function formatMessage(text) {
      // Converter URLs em links
      const urlRegex = /(https?:\/\/[^\s]+)/g;
      return text.replace(urlRegex, '<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>');
    }

    function getCurrentTime() {
      return new Date().toLocaleTimeString('pt-BR', { 
        hour: '2-digit', 
        minute: '2-digit' 
      });
    }

    function showTypingIndicator() {
      isTyping = true;
      document.getElementById('typing-indicator').classList.add('active');
      const messagesContainer = document.getElementById('messages-container');
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function hideTypingIndicator() {
      isTyping = false;
      document.getElementById('typing-indicator').classList.remove('active');
    }

    function autoResize(textarea) {
      textarea.style.height = 'auto';
      textarea.style.height = (textarea.scrollHeight) + 'px';
    }

    function handleKeyDown(event) {
      if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        sendMessage();
      }
    }

    // =============== STATUS E CONEX√ÉO ===============
    function updateTime() {
      document.getElementById('current-time').textContent = 
        new Date().toLocaleTimeString('pt-BR', { 
          hour: '2-digit', 
          minute: '2-digit' 
        });
    }

    async function setupBatteryMonitoring() {
      if ('getBattery' in navigator) {
        try {
          const battery = await navigator.getBattery();
          updateBatteryStatus(battery);
          
          battery.addEventListener('levelchange', () => {
            updateBatteryStatus(battery);
          });
          
          battery.addEventListener('chargingchange', () => {
            updateBatteryStatus(battery);
          });
        } catch (error) {
          console.log('Battery API n√£o suportada');
        }
      }
    }

    function updateBatteryStatus(battery) {
      const batteryElement = document.getElementById('battery-status');
      const level = Math.round(battery.level * 100);
      const charging = battery.charging;
      batteryElement.textContent = charging ? `‚ö° ${level}%` : `${level}%`;
    }

    function updateConnectionStatus(connected) {
      const status = document.getElementById('connection-status');
      const dot = document.getElementById('connection-dot');
      const text = document.getElementById('connection-text');
      
      if (connected) {
        status.classList.add('active');
        dot.classList.add('connected');
        text.textContent = 'Conectado';
        
        setTimeout(() => {
          status.classList.remove('active');
        }, 3000);
      } else {
        status.classList.add('active');
        dot.classList.remove('connected');
        text.textContent = 'Offline';
      }
    }

    async function checkConnection() {
      try {
        const response = await fetch('https://api.mistral.ai/v1/models', {
          method: 'HEAD',
          headers: {
            'Authorization': `Bearer ${API_CONFIG.MISTRAL_API_KEY}`
          }
        });
        
        if (response.ok) {
          updateConnectionStatus(true);
          return true;
        }
      } catch (error) {
        updateConnectionStatus(false);
        return false;
      }
    }

    // =============== PWA INSTALL ===============
    function setupPWA() {
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        const installButton = document.getElementById('install-button');
        installButton.style.display = 'block';
        
        installButton.addEventListener('click', async () => {
          installButton.style.display = 'none';
          deferredPrompt.prompt();
          
          const { outcome } = await deferredPrompt.userChoice;
          if (outcome === 'accepted') {
            console.log('‚úÖ Usu√°rio instalou o app');
          }
          deferredPrompt = null;
        });
      });
    }

    // =============== EVENT LISTENERS ===============
    function setupEventListeners() {
      // Fechar banner de doa√ß√£o
      document.getElementById('sion-banner-close').addEventListener('click', () => {
        const banner = document.getElementById('sion-donation-banner');
        banner.style.opacity = '0';
        banner.style.transform = 'translateY(10px)';
        setTimeout(() => banner.style.display = 'none', 400);
      });
      
      // AdMob
      (adsbygoogle = window.adsbygoogle || []).push({});
    }

    // =============== FUN√á√ïES UTILIT√ÅRIAS ===============
    function exportChat() {
      const chatText = chatHistory.map(msg => 
        `${msg.sender === 'user' ? 'Voc√™' : 'Sion'} (${msg.time}): ${msg.text}`
      ).join('\n\n');
      
      const blob = new Blob([`=== Chat com Sion ===\nData: ${new Date().toLocaleDateString('pt-BR')}\n\n${chatText}`], { 
        type: 'text/plain;charset=utf-8' 
      });
      
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `sion-chat-${new Date().toISOString().split('T')[0]}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      addMessageToChat('Chat exportado com sucesso! üìÅ', 'assistant');
    }

    function clearChat() {
      if (confirm('Tem certeza que deseja limpar todo o hist√≥rico de conversa?')) {
        chatHistory = [];
        localStorage.removeItem('sionChatHistory');
        
        const messagesContainer = document.getElementById('messages-container');
        messagesContainer.innerHTML = `
          <div class="message assistant">
            <div class="message-content">
              <p>Ol√°! Sou o Sion, seu companheiro de explora√ß√£o e solu√ß√µes desenvolvido pela AmplaAI. Estou aqui para ajudar voc√™ com tecnologia, criatividade e inova√ß√£o. Como posso te ajudar hoje? üòä</p>
              <span class="message-time">${getCurrentTime()}</span>
            </div>
          </div>
        `;
        
        addQuickReplies();
      }
    }

    function shareApp() {
      if (navigator.share) {
        navigator.share({
          title: 'Sion - AmplaAI',
          text: 'Converse com o Sion, seu companheiro de explora√ß√£o e solu√ß√µes!',
          url: window.location.href
        });
      } else {
        navigator.clipboard.writeText(window.location.href);
        addMessageToChat('Link copiado para a √°rea de transfer√™ncia! üìã', 'assistant');
      }
    }

    function checkForUpdates() {
      if (serviceWorkerRegistered) {
        navigator.serviceWorker.ready.then(registration => {
          registration.update();
          addMessageToChat('Verificando atualiza√ß√µes... üîÑ', 'assistant');
          setTimeout(() => {
            addMessageToChat('Seu app est√° atualizado! ‚úÖ', 'assistant');
          }, 1500);
        });
      } else {
        addMessageToChat('Recarregue a p√°gina para verificar atualiza√ß√µes.', 'assistant');
      }
    }

    function showUpdateNotification() {
      if (confirm('Uma nova vers√£o do Sion est√° dispon√≠vel! Deseja atualizar?')) {
        window.location.reload();
      }
    }

    // =============== OFFLINE SUPPORT ===============
    window.addEventListener('online', () => {
      if (chatHistory.length > 0) {
        const lastMessage = chatHistory[chatHistory.length - 1];
        if (lastMessage.sender === 'user') {
          // Tentar enviar novamente a √∫ltima mensagem
          setTimeout(() => sendMessage(), 1000);
        }
      }
    });
  </script>
</body>
</html>